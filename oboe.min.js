(function(){function e(e){return e[e.length-1]}function t(e){return e&&e.constructor===Array}(function(e){function t(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),r=0,o=0,i=N.length;i>o;o++){var s=t[N[o]].length;if(s>n)switch(N[o]){case"text":closeText(t);break;default:l(t,"Max buffer length exceeded: "+N[o])}r=Math.max(r,s)}t.bufferCheckPosition=e.MAX_BUFFER_LENGTH-r+t.position}function n(e){for(var t=0,n=N.length;n>t;t++)e[N[t]]=""}function r(t){if(!(this instanceof r))return new r(t);var o=this;n(o),o.bufferCheckPosition=e.MAX_BUFFER_LENGTH,o.q=o.c=o.p="",o.opt=t||{},o.closed=o.closedRoot=o.sawRoot=!1,o.tag=o.error=null,o.state=A.BEGIN,o.stack=new E,o.position=o.column=0,o.line=1,o.slashed=!1,o.unicodeI=0,o.unicodeS=null,s(o,"onready")}function o(e){return new i(e)}function i(e){if(!(this instanceof i))return new i(e);this._parser=new r(e),this.writable=!0,this.readable=!0;var t=this;_.apply(t),this._parser.onend=function(){t.emit("end")},this._parser.onerror=function(e){t.emit("error",e),t._parser.error=null},b.forEach(function(e){Object.defineProperty(t,"on"+e,{get:function(){return t._parser["on"+e]},set:function(n){return n?(t.on(e,n),void 0):(t.removeAllListeners(e),t._parser["on"+e]=n,n)},enumerable:!0,configurable:!1})})}function s(t,n,r){e.INFO&&console.log("-- emit",n,r),t[n]&&t[n](r)}function a(e,t,n){c(e),s(e,t,n)}function c(e,t){e.textNode=f(e.opt,e.textNode),e.textNode&&s(e,t?t:"onvalue",e.textNode),e.textNode=""}function u(e){e.numberNode&&s(e,"onvalue",parseFloat(e.numberNode)),e.numberNode=""}function f(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function l(e,t){return c(e),t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c,t=Error(t),e.error=t,s(e,"onerror",t),e}function p(e){return e.state!==A.VALUE&&l(e,"Unexpected end"),c(e),e.c="",e.closed=!0,s(e,"onend"),r.call(e,e.opt),e}function d(n){var r=this;if(this.error)throw this.error;if(r.closed)return l(r,"Cannot write after close. Assign an onready handler.");if(null===n)return p(r);var o=0,i=n[0],f=r.p;for(e.DEBUG&&console.log("write -> ["+n+"]");i&&(f=i,r.c=i=n.charAt(o++),f!==i?r.p=f:f=r.p,i);)switch(e.DEBUG&&console.log(o,i,e.STATE[r.state]),r.position++,"\n"===i?(r.line++,r.column=0):r.column++,r.state){case A.BEGIN:"{"===i?r.state=A.OPEN_OBJECT:"["===i?r.state=A.OPEN_ARRAY:"\r"!==i&&"\n"!==i&&" "!==i&&"	"!==i&&l(r,"Non-whitespace before {[.");continue;case A.OPEN_KEY:case A.OPEN_OBJECT:if("\r"===i||"\n"===i||" "===i||"	"===i)continue;if(r.state===A.OPEN_KEY)r.stack.push(A.CLOSE_KEY);else{if("}"===i){s(r,"onopenobject"),s(r,"oncloseobject"),r.state=r.stack.pop()||A.VALUE;continue}r.stack.push(A.CLOSE_OBJECT)}'"'===i?r.state=A.STRING:l(r,'Malformed object key should start with "');continue;case A.CLOSE_KEY:case A.CLOSE_OBJECT:if("\r"===i||"\n"===i||" "===i||"	"===i)continue;r.state===A.CLOSE_KEY?"key":"object",":"===i?(r.state===A.CLOSE_OBJECT?(r.stack.push(A.CLOSE_OBJECT),c(r,"onopenobject")):c(r,"onkey"),r.state=A.VALUE):"}"===i?(a(r,"oncloseobject"),r.state=r.stack.pop()||A.VALUE):","===i?(r.state===A.CLOSE_OBJECT&&r.stack.push(A.CLOSE_OBJECT),c(r),r.state=A.OPEN_KEY):l(r,"Bad object");continue;case A.OPEN_ARRAY:case A.VALUE:if("\r"===i||"\n"===i||" "===i||"	"===i)continue;if(r.state===A.OPEN_ARRAY){if(s(r,"onopenarray"),r.state=A.VALUE,"]"===i){s(r,"onclosearray"),r.state=r.stack.pop()||A.VALUE;continue}r.stack.push(A.CLOSE_ARRAY)}'"'===i?r.state=A.STRING:"{"===i?r.state=A.OPEN_OBJECT:"["===i?r.state=A.OPEN_ARRAY:"t"===i?r.state=A.TRUE:"f"===i?r.state=A.FALSE:"n"===i?r.state=A.NULL:"-"===i?r.numberNode+=i:"0"===i?(r.numberNode+=i,r.state=A.NUMBER_DIGIT):-1!=="123456789".indexOf(i)?(r.numberNode+=i,r.state=A.NUMBER_DIGIT):l(r,"Bad value");continue;case A.CLOSE_ARRAY:if(","===i)r.stack.push(A.CLOSE_ARRAY),c(r,"onvalue"),r.state=A.VALUE;else if("]"===i)a(r,"onclosearray"),r.state=r.stack.pop()||A.VALUE;else{if("\r"===i||"\n"===i||" "===i||"	"===i)continue;l(r,"Bad array")}continue;case A.STRING:var d=o-1,h=r.slashed,E=r.unicodeI;e:for(;;){for(e.DEBUG&&console.log(o,i,e.STATE[r.state],h);E>0;)if(r.unicodeS+=i,i=n.charAt(o++),4===E?(r.textNode+=String.fromCharCode(parseInt(r.unicodeS,16)),E=0,d=o-1):E++,!i)break e;if('"'===i&&!h){r.state=r.stack.pop()||A.VALUE,r.textNode+=n.substring(d,o-1),r.textNode||s(r,"onvalue","");break}if("\\"===i&&!h&&(h=!0,r.textNode+=n.substring(d,o-1),i=n.charAt(o++),!i))break;if(h){if(h=!1,"n"===i?r.textNode+="\n":"r"===i?r.textNode+="\r":"t"===i?r.textNode+="	":"f"===i?r.textNode+="\f":"b"===i?r.textNode+="\b":"u"===i?(E=1,r.unicodeS=""):r.textNode+=i,i=n.charAt(o++),d=o-1,i)continue;break}y.lastIndex=o;var L=y.exec(n);if(null===L){o=n.length+1,r.textNode+=n.substring(d,o-1);break}if(o=L.index+1,i=n.charAt(L.index),!i){r.textNode+=n.substring(d,o-1);break}}r.slashed=h,r.unicodeI=E;continue;case A.TRUE:if(""===i)continue;"r"===i?r.state=A.TRUE2:l(r,"Invalid true started with t"+i);continue;case A.TRUE2:if(""===i)continue;"u"===i?r.state=A.TRUE3:l(r,"Invalid true started with tr"+i);continue;case A.TRUE3:if(""===i)continue;"e"===i?(s(r,"onvalue",!0),r.state=r.stack.pop()||A.VALUE):l(r,"Invalid true started with tru"+i);continue;case A.FALSE:if(""===i)continue;"a"===i?r.state=A.FALSE2:l(r,"Invalid false started with f"+i);continue;case A.FALSE2:if(""===i)continue;"l"===i?r.state=A.FALSE3:l(r,"Invalid false started with fa"+i);continue;case A.FALSE3:if(""===i)continue;"s"===i?r.state=A.FALSE4:l(r,"Invalid false started with fal"+i);continue;case A.FALSE4:if(""===i)continue;"e"===i?(s(r,"onvalue",!1),r.state=r.stack.pop()||A.VALUE):l(r,"Invalid false started with fals"+i);continue;case A.NULL:if(""===i)continue;"u"===i?r.state=A.NULL2:l(r,"Invalid null started with n"+i);continue;case A.NULL2:if(""===i)continue;"l"===i?r.state=A.NULL3:l(r,"Invalid null started with nu"+i);continue;case A.NULL3:if(""===i)continue;"l"===i?(s(r,"onvalue",null),r.state=r.stack.pop()||A.VALUE):l(r,"Invalid null started with nul"+i);continue;case A.NUMBER_DECIMAL_POINT:"."===i?(r.numberNode+=i,r.state=A.NUMBER_DIGIT):l(r,"Leading zero not followed by .");continue;case A.NUMBER_DIGIT:-1!=="0123456789".indexOf(i)?r.numberNode+=i:"."===i?(-1!==r.numberNode.indexOf(".")&&l(r,"Invalid number has two dots"),r.numberNode+=i):"e"===i||"E"===i?((-1!==r.numberNode.indexOf("e")||-1!==r.numberNode.indexOf("E"))&&l(r,"Invalid number has two exponential"),r.numberNode+=i):"+"===i||"-"===i?("e"!==f&&"E"!==f&&l(r,"Invalid symbol in number"),r.numberNode+=i):(u(r),o--,r.state=r.stack.pop()||A.VALUE);continue;default:l(r,"Unknown state: "+r.state)}return r.position>=r.bufferCheckPosition&&t(r),r}var h,E;if(h="object"==typeof process&&process.env?process.env:window,"function"==typeof FastList)E=FastList;else if("function"==typeof require)try{E=require("fast-list")}catch(L){E=Array}else E=Array;e.parser=function(e){return new r(e)},e.CParser=r,e.CStream=i,e.createStream=o,e.MAX_BUFFER_LENGTH=65536,e.DEBUG="debug"===h.CDEBUG,e.INFO="debug"===h.CDEBUG||"info"===h.CDEBUG,e.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var _,N=["textNode","numberNode"],b=e.EVENTS.filter(function(e){return"error"!==e&&"end"!==e}),A=0;e.STATE={BEGIN:A++,VALUE:A++,OPEN_OBJECT:A++,CLOSE_OBJECT:A++,OPEN_ARRAY:A++,CLOSE_ARRAY:A++,TEXT_ESCAPE:A++,STRING:A++,BACKSLASH:A++,END:A++,OPEN_KEY:A++,CLOSE_KEY:A++,TRUE:A++,TRUE2:A++,TRUE3:A++,FALSE:A++,FALSE2:A++,FALSE3:A++,FALSE4:A++,NULL:A++,NULL2:A++,NULL3:A++,NUMBER_DECIMAL_POINT:A++,NUMBER_DIGIT:A++};for(var v in e.STATE)e.STATE[e.STATE[v]]=v;A=e.STATE,Object.create||(Object.create=function(e){function t(){this.__proto__=e}return t.prototype=e,new t}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t});var y=/[\\"\n]/g;r.prototype={end:function(){p(this)},write:d,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{_=require("stream").Stream}catch(O){_=function(){}}i.prototype=Object.create(_.prototype,{constructor:{value:i}}),i.prototype.write=function(e){return this._parser.write(""+e),this.emit("data",e),!0},i.prototype.end=function(e){return e&&e.length&&this._parser.write(""+e),this._parser.end(),!0},i.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===b.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),_.prototype.on.call(n,e,t)},i.prototype.destroy=function(){n(this._parser),this.emit("close")}})("undefined"==typeof exports?clarinet={}:exports),function(e){e.fetch=function(e,t,n){function r(){if(o.responseText.length>i){var e=o.responseText.substr(i);i=o.responseText.length,t(e)}}var o=new XMLHttpRequest,i=0;o.open("GET",e,!0),o.send(null),o.onprogress=r,o.onload=n}}("undefined"==typeof exports?streamingXhr={}:exports);var n=function(){function t(e,r){for(var o=0;n.length>o;o++){var i=n[o].pattern.exec(e);if(i){var s=!!i[1],a=i[2],c=n[o].expr.bind(null,r,s,a);return e?t(e.substr(i[0].length),c):c}}throw Error('"'+e+'" could not be tokenised')}var n=function(){function t(e,t,n,r,o,i){var s=e(r,o,i-1);return s&&a(t,s,o,i)}function n(e,n,r,o,i,s){return o[s]==r&&t(e,n,r,o,i,s)}function r(e,t,n,o,i,s){return-1>s?!1:-1==s||e(o,i,s)||r(e,t,n,o,i,s-1)}function o(e,t,n,r,o,i){return-1==i&&a(t,!0,o,i)}function i(e,t,n,r,o,i){return e(r,o,i)}function s(t,n,r,o,i){var s=t(o,i,o.length-1);return s===!0?e(i):s}function a(e,t,n,r){return e?n[r+1]:t||!0}function c(e,t){return{pattern:e,expr:t}}var u=/^(\$?)(\w+)/,f=/^(\$?)\[(\d+)\]/,l=/^(\$?)\["(\w+)"\]/,p=/^(\$?)\*/,d=/^(\$?)\[\*\]/,h=/^\.\./,E=/^\./,L=/^(\$?)!/,_=/^$/;return[c(u,n),c(f,n),c(l,n),c(p,t),c(d,t),c(h,r),c(E,i),c(L,o),c(_,s)]}();return function(e){try{return t(e,function(){return!0})}catch(n){throw Error('Could not compile "'+e+'" because '+n)}}}(),r=function(r){function o(n){function r(e){e&&(e[a]=s,f.push(a)),u.push(s)}var o=clarinet.parser(n);this._thingFoundListeners=[],this._pathMatchedListeners=[],this._errorListeners=[],this._clarinet=o;var s,a,c=this,u=[],f=[];o.onkey=function(e){i(c._pathMatchedListeners,null,f.concat(e),u),a=e},o.onvalue=function(e){s[a]=e,i(c._thingFoundListeners,e,f.concat(a),u),t(s)?a++:a=null},o.onopenobject=function(e){var t=s;s={},i(c._pathMatchedListeners,s,f,u),r(t),i(c._pathMatchedListeners,null,f.concat(e),u),a=e},o.onopenarray=function(){var e=s;s=[],r(e),i(c._pathMatchedListeners,s,f,u),a=0},o.onend=o.oncloseobject=o.onclosearray=function(){u.pop(),i(c._thingFoundListeners,s,f,u),f.pop(),s=e(u),t(s)&&(a=s.length)},o.onerror=function(e){c._errorListeners.forEach(function(t){t(e)}),c.close()}}function i(e,t,n,r){var o=r.concat([t]);e.forEach(function(e){var t=e.test(n,o);if(t!==!1){var i=e.context||window;e.callback.call(i,t,n,r)}})}function s(e,t,r,o){return e.push({pattern:t,test:n(t),callback:r,context:o})}function a(e,t){for(var n in t)s(e,n,t[n])}function c(e,t,n,r){"string"==typeof t?s(e,t,n,r):a(e,t)}return r.parser=function(e){return new o(e)},r.fetch=function(e){return(new o).fetch(e)},o.prototype.fetch=function(e){return streamingXhr.fetch(e,this.read.bind(this),this.close.bind(this)),this},o.prototype.read=function(e){if(closed)throw Error();try{this._clarinet.write(e)}catch(t){console.log("Error:"+t.message)}},o.prototype.close=function(){this.closed=!0,this._thingFoundListeners=[],this._pathMatchedListeners=[],this._errorListeners=[];var e=this._clarinet;e.onkey=e.onvalue=e.onopenobject=e.onopenarray=e.onend=e.oncloseobject=e.onclosearray=e.onerror=null,e.close()},o.prototype.onPath=function(e,t,n){return c(this._pathMatchedListeners,e,t,n),this},o.prototype.onFind=function(e,t,n){return c(this._thingFoundListeners,e,t,n),this},o.prototype.onError=function(e){return this._errorListeners.push(e),this},r}("undefined"==typeof exports?{}:exports);window.oboe=r})();