!function a(b,c,d,e,f,g){function h(a,b){return function(){return a.call(this,b.apply(this,arguments))}}function i(a){return function(b){return b[a]}}function j(a,b){return b.apply(g,a)}function k(a){var b=a.length-1,c=d.prototype.slice;if(0==b)return function(){return a.call(this,c.call(arguments))};if(1==b)return function(){return a.call(this,arguments[0],c.call(arguments,1))};var e=d(a.length);return function(){for(var d=0;b>d;d++)e[d]=arguments[d];return e[b]=c.call(arguments,b),a.apply(this,e)}}function l(a){return function(b,c){return a(c,b)}}function m(a,b){return function(c){return a(c)&&b(c)}}function n(){}function o(){return!0}function p(a){return function(){return a}}function q(a,b){return b&&b.constructor===a}function r(a){return a!==g}function s(a,b){return b instanceof c&&z(function(a){return a in b},a)}function t(a,b){return[a,b]}function u(a){return B(a.reduce(l(t),W))}function v(a){return x(function(a,b){return a.unshift(b),a},[],a)}function w(a,b){return b?t(a(X(b)),w(a,Y(b))):W}function x(a,b,c){return c?a(x(a,b,Y(c)),X(c)):b}function y(a,b,c){function d(a,c){return a?b(X(a))?(c(X(a)),Y(a)):t(X(a),d(Y(a),c)):W}return d(a,c||n)}function z(a,b){return!b||a(X(b))&&z(a,Y(b))}function A(a,b){a&&(X(a).apply(null,b),A(Y(a),b))}function B(a){function b(a,c){return a?b(Y(a),t(X(a),c)):c}return b(a,W)}function C(a,b){return b&&(a(X(b))?X(b):C(a,Y(b)))}function D(a){"use strict";function b(){var a=0;S.length>s&&(c("Max buffer length exceeded: textNode"),a=Math.max(a,S.length)),T.length>s&&(c("Max buffer length exceeded: numberNode"),a=Math.max(a,T.length)),R=s-a+_}function c(a){S&&(q(S),S=""),i=e(a+"\nLn: "+bb+"\nCol: "+ab+"\nChr: "+j),r(M(g,g,i))}function d(){(W!==w||0!==$)&&c("Unexpected end"),S&&(q(S),S=""),V=!0}function f(a){return"\r"==a||"\n"==a||" "==a||"	"==a}function h(a){if(!i){if(V)return c("Cannot write after close");var d=0;for(j=a[0];j&&(k=j,j=a.charAt(d++));)switch(_++,"\n"===j?(bb++,ab=0):ab++,W){case v:"{"===j?W=x:"["===j?W=z:f(j)||c("Non-whitespace before {[.");continue;case C:case x:if(f(j))continue;if(W===C)X.push(D);else{if("}"===j){l(),m(),W=X.pop()||w;continue}X.push(y)}'"'===j?W=B:c('Malformed object key should start with " ');continue;case D:case y:if(f(j))continue;":"===j?(W===y?(X.push(y),S&&(l(),p(S),S=""),$++):S&&(p(S),S=""),W=w):"}"===j?(S&&(q(S),S=""),m(),$--,W=X.pop()||w):","===j?(W===y&&X.push(y),S&&(q(S),S=""),W=C):c("Bad object");continue;case z:case w:if(f(j))continue;if(W===z){if(n(),$++,W=w,"]"===j){o(),$--,W=X.pop()||w;continue}X.push(A)}'"'===j?W=B:"{"===j?W=x:"["===j?W=z:"t"===j?W=E:"f"===j?W=H:"n"===j?W=L:"-"===j?T+=j:"0"===j?(T+=j,W=Q):-1!=="123456789".indexOf(j)?(T+=j,W=Q):c("Bad value");continue;case A:if(","===j)X.push(A),S&&(q(S),S=""),W=w;else if("]"===j)S&&(q(S),S=""),o(),$--,W=X.pop()||w;else{if(f(j))continue;c("Bad array")}continue;case B:var e=d-1;a:for(;;){for(;Z>0;)if(Y+=j,j=a.charAt(d++),4===Z?(S+=String.fromCharCode(parseInt(Y,16)),Z=0,e=d-1):Z++,!j)break a;if('"'===j&&!U){W=X.pop()||w,S+=a.substring(e,d-1),S||q("");break}if("\\"===j&&!U&&(U=!0,S+=a.substring(e,d-1),j=a.charAt(d++),!j))break;if(U){if(U=!1,"n"===j?S+="\n":"r"===j?S+="\r":"t"===j?S+="	":"f"===j?S+="\f":"b"===j?S+="\b":"u"===j?(Z=1,Y=""):S+=j,j=a.charAt(d++),e=d-1,j)continue;break}t.lastIndex=d;var g=t.exec(a);if(!g){d=a.length+1,S+=a.substring(e,d-1);break}if(d=g.index+1,j=a.charAt(g.index),!j){S+=a.substring(e,d-1);break}}continue;case E:if(!j)continue;"r"===j?W=F:c("Invalid true started with t"+j);continue;case F:if(!j)continue;"u"===j?W=G:c("Invalid true started with tr"+j);continue;case G:if(!j)continue;"e"===j?(q(!0),W=X.pop()||w):c("Invalid true started with tru"+j);continue;case H:if(!j)continue;"a"===j?W=I:c("Invalid false started with f"+j);continue;case I:if(!j)continue;"l"===j?W=J:c("Invalid false started with fa"+j);continue;case J:if(!j)continue;"s"===j?W=K:c("Invalid false started with fal"+j);continue;case K:if(!j)continue;"e"===j?(q(!1),W=X.pop()||w):c("Invalid false started with fals"+j);continue;case L:if(!j)continue;"u"===j?W=N:c("Invalid null started with n"+j);continue;case N:if(!j)continue;"l"===j?W=O:c("Invalid null started with nu"+j);continue;case O:if(!j)continue;"l"===j?(q(null),W=X.pop()||w):c("Invalid null started with nul"+j);continue;case P:"."===j?(T+=j,W=Q):c("Leading zero not followed by .");continue;case Q:-1!=="0123456789".indexOf(j)?T+=j:"."===j?(-1!==T.indexOf(".")&&c("Invalid number has two dots"),T+=j):"e"===j||"E"===j?((-1!==T.indexOf("e")||-1!==T.indexOf("E"))&&c("Invalid number has two exponential"),T+=j):"+"===j||"-"===j?("e"!==k&&"E"!==k&&c("Invalid symbol in number"),T+=j):(T&&(q(parseFloat(T)),T=""),d--,W=X.pop()||w);continue;default:c("Unknown state: "+W)}_>=R&&b()}}var i,j,k,l=a(pb).emit,m=a(qb).emit,n=a(rb).emit,o=a(sb).emit,p=a(ob).emit,q=a(nb).emit,r=a(gb).emit,s=65536,t=/[\\"\n]/g,u=0,v=u++,w=u++,x=u++,y=u++,z=u++,A=u++,B=u++,C=u++,D=u++,E=u++,F=u++,G=u++,H=u++,I=u++,J=u++,K=u++,L=u++,N=u++,O=u++,P=u++,Q=u,R=s,S="",T="",U=!1,V=!1,W=v,X=[],Y=null,Z=0,$=0,_=0,ab=0,bb=1;a(kb).on(h),a(lb).on(d)}function E(a,b){"use strict";function c(a){return function(b){d=a(d,b)}}var d,e={};for(var f in b)a(f).on(c(b[f]),e);a(mb).on(function(){for(var c in b)a(c).un(e)})}function F(a){var b={};return a&&a.split("\r\n").forEach(function(a){var c=a.indexOf(": ");b[a.substring(0,c)]=a.substring(c+2)}),b}function G(){return new XMLHttpRequest}function H(a,c,d,e,f,h,i){"use strict";function j(){var a=c.responseText,b=a.substr(m);b&&k(b),m=U(a)}var k=a(kb).emit,l=a(gb).emit,m=0,n=!0;a(mb).on(function(){c.onreadystatechange=null,c.abort()}),"onprogress"in c&&(c.onprogress=j),c.onreadystatechange=function(){function b(){try{n&&a(jb).emit(c.status,F(c.getAllResponseHeaders())),n=!1}catch(b){}}switch(c.readyState){case 2:case 3:return b();case 4:b();var d=2==String(c.status)[0];d?(j(),a(lb).emit()):l(M(c.status,c.responseText))}};try{c.open(d,e,!0);for(var o in h)c.setRequestHeader(o,h[o]);c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.withCredentials=i,c.send(f)}catch(p){b.setTimeout(S(l,M(g,g,p)),0)}}function I(a,b){return{key:a,node:b}}function J(a){function b(a,b){var c=ab(X(a));return q(d,c)?f(a,U(c),b):a}function c(a,c){if(!a)return k(c),f(a,bb,c);var d=b(a,c),g=Y(d),h=_(X(d));return e(g,h,c),t(I(h,c),g)}function e(a,b,c){ab(X(a))[b]=c}function f(a,b,c){a&&e(a,b,c);var d=t(I(b,c),a);return i(d),d}function g(a){return j(a),Y(a)||l(ab(X(a)))}var i=a(eb).emit,j=a(fb).emit,k=a(ib).emit,l=a(hb).emit,m={};return m[pb]=function(a){return c(a,{})},m[rb]=function(a){return c(a,[])},m[ob]=f,m[nb]=h(g,c),m[qb]=g,m[sb]=g,m}function K(a,b,c){function d(a){return function(b){return b.id==a}}var e,f;return{on:function(c,d){var g={listener:c,id:d||c};return b&&b.emit(a,c,g.id),e=t(g,e),f=t(c,f),this},emit:function(){A(f,arguments)},un:function(b){var g;e=y(e,d(b),function(a){g=a}),g&&(f=y(f,function(a){return a==g.listener}),c&&c.emit(a,g.listener,g.id))},listeners:function(){return f},hasListener:function(a){var b=a?d(a):o;return r(C(b,e))}}}function L(){function a(a){return c[a]=K(a,d,e)}function b(b){return c[b]||a(b)}var c={},d=a("newListener"),e=a("removeListener");return["emit","on","un"].forEach(function(a){b[a]=k(function(c,d){j(d,b(c)[a])})}),b}function M(a,b,c){try{var d=f.parse(b)}catch(e){}return{statusCode:a,body:b,jsonBody:d,thrown:c}}function N(a,b){function c(a,b,c){var d=B(c);a(b,v(Y(w(_,d))),v(w(ab,d)))}function d(b,d,e){var f=a(b).emit;d.on(function(a){var b=e(a);b!==!1&&c(f,ab(b),a)},b),a("removeListener").on(function(c){c==b&&(a(c).listeners()||d.un(b))})}var e={node:a(fb),path:a(eb)};a("newListener").on(function(a){var c=/(node|path):(.*)/.exec(a);if(c){var f=e[c[1]];f.hasListener(a)||d(a,f,b(c[2]))}})}function O(a){function b(b,c){return a(b).on(d(c),c),i}function c(a,b){var c=d(b);return a.on(function(){var d=!1;i.forget=function(){d=!0},j(arguments,c),delete i.forget,d&&a.un(b)},b),i}function d(b){return function(){try{b.apply(i,arguments)}catch(c){a(gb).emit(M(g,g,c))}}}function e(b,c){return a(b+":"+c)}function f(a,b){for(var d in b)c(e(a,d),b[d])}function h(a,b,d){return V(b)?c(e(a,b),d):f(a,b),i}var i,l=/^(node|path):./,m=a(hb),o=k(function(b,d){if(i[b])j(d,i[b]);else{var e=a(b),f=d[0];l.test(b)?c(e,f):e.on(f)}return i}),q=function(b,c,d){if("done"==b)m.un(c);else if("node"==b||"path"==b)a.un(b+":"+c,d);else{var e=c;a(b).un(e)}return i};return a(ib).on(function(a){i.root=p(a)}),a(jb).on(function(a,b){i.header=function(a){return a?b[a]:b}}),i={on:o,addListener:o,removeListener:q,emit:a.emit,node:S(h,"node"),path:S(h,"path"),done:S(c,m),start:S(b,jb),fail:a(gb).on,abort:a(mb).emit,header:n,root:n}}function P(){return[a]}function Q(a,b,c,d,e,g,h){function i(a,b){return b===!1&&(a+=-1==a.indexOf("?")?"?":"&",a+="_="+(new Date).getTime()),a}return e=e?f.parse(f.stringify(e)):{},d?V(d)||(d=f.stringify(d),e["Content-Type"]=e["Content-Type"]||"application/json"):d=null,a(c||"GET",i(b,h),d,e,g||!1)}function R(a){return a?a.url?Q(ub,a.url,a.method,a.body,a.headers,a.withCredentials,a.cached):Q(ub,a):ub()}var S=k(function(a,b){var c=b.length;return k(function(d){for(var e=0;e<d.length;e++)b[c+e]=d[e];return b.length=c+d.length,a.apply(this,b)})}),T=(k(function(a){function b(a,b){return[j(a,b)]}var c=u(a);return k(function(a){return x(b,a,c)[0]})}),k(function(a){return k(function(b){for(var c,d=0;d<U(a);d++)if(c=j(b,a[d]))return c})})),U=i("length"),V=S(q,String),W=null,X=i(0),Y=i(1),Z=k(u),$=function(){var a=function(a){return a.exec.bind(a)},b=k(function(b){return b.unshift(/^/),a(RegExp(b.map(i("source")).join("")))}),c=/(\$?)/,d=/([\w-_]+|\*)/,e=/()/,f=/\["([^"]+)"\]/,g=/\[(\d+|\*)\]/,h=/{([\w ]*?)}/,j=/(?:{([\w ]*?)})?/,l=b(c,d,j),m=b(c,f,j),n=b(c,g,j),o=b(c,e,h),p=b(/\.\./),q=b(/\./),r=b(c,/!/),s=b(/$/);return function(a){return a(T(l,m,n,o),p,q,r,s)}}(),_=i("key"),ab=i("node"),bb={},cb=$(function(a,b,c,d,f){function g(a,b){var c=b[z],d=c&&"*"!=c?function(a){return B(a)==c}:o;return m(d,a)}function i(a,b){var c=b[A];if(!c)return a;var d=S(s,u(c.split(/\W+/))),e=h(d,C);return m(e,a)}function j(a,b){var c=!!b[y];return c?m(a,X):a}function k(a){function b(a){return B(a)!=bb}return a==o?o:m(b,h(a,Y))}function l(a){function b(a){return a?f(a):!1}if(a==o)return o;var c=n(),d=a,e=k(b),f=T(c,d,e);return b}function n(){return function(a){return B(a)==bb}}function p(a){return function(b){var c=a(b);return c===!0?X(b):c}}function q(a,b,c){return x(function(a,b){return b(a,c)},b,a)}function r(a,b,c,d,e){var f=a(c);if(f){var g=q(b,d,f),h=c.substr(U(f[0]));return e(h,g)}}function t(a,b){return S(r,a,b)}function v(a,b){return b}function w(a,b){var c=a?w:v;return D(a,b,c)}var y=1,z=2,A=3,B=h(_,X),C=h(ab,X),D=T(t(a,Z(j,i,g,k)),t(b,Z(l)),t(c,Z()),t(d,Z(j,n)),t(f,Z(p)),function(a){throw e('"'+a+'" could not be tokenised')});return function(a){try{return w(a,o)}catch(b){throw e('Could not compile "'+a+'" because '+b.message)}}}),db=1,eb=db++,fb=db++,gb="fail",hb=db++,ib=db++,jb="start",kb="content",lb=db++,mb=db++,nb="SAX_VALUE",ob="SAX_KEY",pb="SAX_OPEN_OBJECT",qb="SAX_CLOSE_OBJECT",rb="SAX_OPEN_ARRAY",sb="SAX_CLOSE_ARRAY",tb=function(){"use strict";function a(a,b,c){var d=c||this;b.forEach(function(b){a.on(b,function(a){console.log((c?"parent":"child")+' forwarding via portal "'+b+'"'+(a?" = "+f.stringify(a):" (no value)")),d.postMessage([b,a])})})}function b(a,b){function c(c){var d=c.data;console.log((b?"parent":"child")+' received via portal "'+d[0]+'"'+(d[1]?" = "+f.stringify(d[1]):" (no value)")),a.emit(d[0],d[1])}(b||this).onmessage=c}function c(c,d){var e=L();console.log("worker waiting for setup message"),this.onmessage=function(g){var h=g.data;console.log("worker: got setup message with config "+f.stringify(h)),a(e,d),b(e),h.unshift(e),c.apply(null,h),console.log("worker: ready for events")}}function d(d,e,g){return d.concat(a,b).map(String).concat("("+String(c)+")("+String(e)+","+f.stringify(g)+")")}return function(c,e,f,g){var h=URL.createObjectURL(new Blob(d(c,e,g),{type:"text/javascript"}));return k(function(c,d){var e=new Worker(h);console.log("created blob and worker"),e.postMessage(d),console.log("sent first message to worker"),a(c,f,e),b(c,e)})}}(),ub=function(){var a=tb(P(),function(a,b,c,d,e,f){console.log("setting up the in-worker wiring to "+b+" "+c),c&&H(a,G(),b,c,d,e,f),D(a)},[mb,kb,lb],[ob,nb,pb,qb,rb,sb,gb]);return function(b,c,d,e,f){var g=L();return console.log("wiring will invoke the portal"),a(g,b,c,d,e,f),E(g,J(g)),N(g,cb),new O(g)}}();"function"==typeof define&&define.amd?define("oboe",[],function(){return R}):b.oboe=R}(window,Object,Array,Error,JSON);