(function(t,e){function n(t){return t[o(t)-1]}function r(t){return t&&t.constructor===Array}function o(t){return t.length}function i(t,e){return Array.prototype.slice.call(t,e)}function s(t,e){var n=i(arguments,2);t.forEach(function(t){t.apply(e,n)})}function a(t,n,r){for(var i,s=0;o(t)>s;s++)if(i=t[s].apply(e,n))return i;return r()}function c(t){var n=i(arguments);return n[0]=e,t.bind.apply(t,n)}function u(){return!0}function f(t,i,s){function a(t){var e=n(d);r(e)&&c(f,t),e[f]=t,h.push(f),d.push(t)}function c(t,n){var r=t===e?h:h.concat(t);s(n,r,d),f=t}function u(){var t=d.pop(),s=n(d);i(t,h,d),h.pop(),f=r(s)?o(s):e}var f,l,d=[],h=[],p=function(t){c(e,t),l=t,d.push(t),p=a};return t.onopenobject=function(t){p({}),t!==e&&c(t)},t.onopenarray=function(){p([]),f=0},t.onkey=c,t.onvalue=function(t){p(t),u()},t.onend=t.oncloseobject=t.onclosearray=u,{getRoot:function(){return l}}}(function(t,e){t.forEach=t.forEach||function(t){for(var e=0;o(this)>e;e++)t(this[e])},t.filter=t.filter||function(t){var e=[];return this.forEach(function(n){t(n)&&e.push(n)}),e},e.bind=e.bind||function(t){var e=this,n=i(arguments,1);return function(){var r=n.concat(i(arguments));return e.apply(t,r)}}})(Array.prototype,Function.prototype),function(n){function r(t){for(var e=Math.max(n.MAX_BUFFER_LENGTH,10),r=0,o=0,i=v.length;i>o;o++){var s=t[v[o]].length;if(s>e)switch(v[o]){case"text":closeText(t);break;default:h(t,"Max buffer length exceeded: "+v[o])}r=Math.max(r,s)}t.bufferCheckPosition=n.MAX_BUFFER_LENGTH-r+t.position}function o(t){for(var e=0,n=v.length;n>e;e++)t[v[e]]=""}function i(t){if(!(this instanceof i))return new i(t);var e=this;o(e),e.bufferCheckPosition=n.MAX_BUFFER_LENGTH,e.q=e.c=e.p="",e.opt=t||{},e.closed=e.closedRoot=e.sawRoot=!1,e.tag=e.error=null,e.state=A.BEGIN,e.stack=new _,e.position=e.column=0,e.line=1,e.slashed=!1,e.unicodeI=0,e.unicodeS=null,c(e,"onready")}function s(t){return new a(t)}function a(t){if(!(this instanceof a))return new a(t);this._parser=new i(t),this.writable=!0,this.readable=!0;var n=this;N.apply(n),this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(t){n.emit("error",t),n._parser.error=null},y.forEach(function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(r){return r?(n.on(t,r),e):(n.removeAllListeners(t),n._parser["on"+t]=r,r)},enumerable:!0,configurable:!1})})}function c(t,e,r){n.INFO&&console.log("-- emit",e,r),t[e]&&t[e](r)}function u(t,e,n){f(t),c(t,e,n)}function f(t,e){t.textNode=d(t.opt,t.textNode),t.textNode&&c(t,e?e:"onvalue",t.textNode),t.textNode=""}function l(t){t.numberNode&&c(t,"onvalue",parseFloat(t.numberNode)),t.numberNode=""}function d(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function h(t,e){return f(t),e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c,e=Error(e),t.error=e,c(t,"onerror",e),t}function p(t){return t.state!==A.VALUE&&h(t,"Unexpected end"),f(t),t.c="",t.closed=!0,c(t,"onend"),i.call(t,t.opt),t}function E(t){var e=this;if(this.error)throw this.error;if(e.closed)return h(e,"Cannot write after close. Assign an onready handler.");if(null===t)return p(e);var o=0,i=t[0],s=e.p;for(n.DEBUG&&console.log("write -> ["+t+"]");i&&(s=i,e.c=i=t.charAt(o++),s!==i?e.p=s:s=e.p,i);)switch(n.DEBUG&&console.log(o,i,n.STATE[e.state]),e.position++,"\n"===i?(e.line++,e.column=0):e.column++,e.state){case A.BEGIN:"{"===i?e.state=A.OPEN_OBJECT:"["===i?e.state=A.OPEN_ARRAY:"\r"!==i&&"\n"!==i&&" "!==i&&"	"!==i&&h(e,"Non-whitespace before {[.");continue;case A.OPEN_KEY:case A.OPEN_OBJECT:if("\r"===i||"\n"===i||" "===i||"	"===i)continue;if(e.state===A.OPEN_KEY)e.stack.push(A.CLOSE_KEY);else{if("}"===i){c(e,"onopenobject"),c(e,"oncloseobject"),e.state=e.stack.pop()||A.VALUE;continue}e.stack.push(A.CLOSE_OBJECT)}'"'===i?e.state=A.STRING:h(e,'Malformed object key should start with "');continue;case A.CLOSE_KEY:case A.CLOSE_OBJECT:if("\r"===i||"\n"===i||" "===i||"	"===i)continue;e.state===A.CLOSE_KEY?"key":"object",":"===i?(e.state===A.CLOSE_OBJECT?(e.stack.push(A.CLOSE_OBJECT),f(e,"onopenobject")):f(e,"onkey"),e.state=A.VALUE):"}"===i?(u(e,"oncloseobject"),e.state=e.stack.pop()||A.VALUE):","===i?(e.state===A.CLOSE_OBJECT&&e.stack.push(A.CLOSE_OBJECT),f(e),e.state=A.OPEN_KEY):h(e,"Bad object");continue;case A.OPEN_ARRAY:case A.VALUE:if("\r"===i||"\n"===i||" "===i||"	"===i)continue;if(e.state===A.OPEN_ARRAY){if(c(e,"onopenarray"),e.state=A.VALUE,"]"===i){c(e,"onclosearray"),e.state=e.stack.pop()||A.VALUE;continue}e.stack.push(A.CLOSE_ARRAY)}'"'===i?e.state=A.STRING:"{"===i?e.state=A.OPEN_OBJECT:"["===i?e.state=A.OPEN_ARRAY:"t"===i?e.state=A.TRUE:"f"===i?e.state=A.FALSE:"n"===i?e.state=A.NULL:"-"===i?e.numberNode+=i:"0"===i?(e.numberNode+=i,e.state=A.NUMBER_DIGIT):-1!=="123456789".indexOf(i)?(e.numberNode+=i,e.state=A.NUMBER_DIGIT):h(e,"Bad value");continue;case A.CLOSE_ARRAY:if(","===i)e.stack.push(A.CLOSE_ARRAY),f(e,"onvalue"),e.state=A.VALUE;else if("]"===i)u(e,"onclosearray"),e.state=e.stack.pop()||A.VALUE;else{if("\r"===i||"\n"===i||" "===i||"	"===i)continue;h(e,"Bad array")}continue;case A.STRING:var a=o-1,d=e.slashed,E=e.unicodeI;t:for(;;){for(n.DEBUG&&console.log(o,i,n.STATE[e.state],d);E>0;)if(e.unicodeS+=i,i=t.charAt(o++),4===E?(e.textNode+=String.fromCharCode(parseInt(e.unicodeS,16)),E=0,a=o-1):E++,!i)break t;if('"'===i&&!d){e.state=e.stack.pop()||A.VALUE,e.textNode+=t.substring(a,o-1),e.textNode||c(e,"onvalue","");break}if("\\"===i&&!d&&(d=!0,e.textNode+=t.substring(a,o-1),i=t.charAt(o++),!i))break;if(d){if(d=!1,"n"===i?e.textNode+="\n":"r"===i?e.textNode+="\r":"t"===i?e.textNode+="	":"f"===i?e.textNode+="\f":"b"===i?e.textNode+="\b":"u"===i?(E=1,e.unicodeS=""):e.textNode+=i,i=t.charAt(o++),a=o-1,i)continue;break}T.lastIndex=o;var L=T.exec(t);if(null===L){o=t.length+1,e.textNode+=t.substring(a,o-1);break}if(o=L.index+1,i=t.charAt(L.index),!i){e.textNode+=t.substring(a,o-1);break}}e.slashed=d,e.unicodeI=E;continue;case A.TRUE:if(""===i)continue;"r"===i?e.state=A.TRUE2:h(e,"Invalid true started with t"+i);continue;case A.TRUE2:if(""===i)continue;"u"===i?e.state=A.TRUE3:h(e,"Invalid true started with tr"+i);continue;case A.TRUE3:if(""===i)continue;"e"===i?(c(e,"onvalue",!0),e.state=e.stack.pop()||A.VALUE):h(e,"Invalid true started with tru"+i);continue;case A.FALSE:if(""===i)continue;"a"===i?e.state=A.FALSE2:h(e,"Invalid false started with f"+i);continue;case A.FALSE2:if(""===i)continue;"l"===i?e.state=A.FALSE3:h(e,"Invalid false started with fa"+i);continue;case A.FALSE3:if(""===i)continue;"s"===i?e.state=A.FALSE4:h(e,"Invalid false started with fal"+i);continue;case A.FALSE4:if(""===i)continue;"e"===i?(c(e,"onvalue",!1),e.state=e.stack.pop()||A.VALUE):h(e,"Invalid false started with fals"+i);continue;case A.NULL:if(""===i)continue;"u"===i?e.state=A.NULL2:h(e,"Invalid null started with n"+i);continue;case A.NULL2:if(""===i)continue;"l"===i?e.state=A.NULL3:h(e,"Invalid null started with nu"+i);continue;case A.NULL3:if(""===i)continue;"l"===i?(c(e,"onvalue",null),e.state=e.stack.pop()||A.VALUE):h(e,"Invalid null started with nul"+i);continue;case A.NUMBER_DECIMAL_POINT:"."===i?(e.numberNode+=i,e.state=A.NUMBER_DIGIT):h(e,"Leading zero not followed by .");continue;case A.NUMBER_DIGIT:-1!=="0123456789".indexOf(i)?e.numberNode+=i:"."===i?(-1!==e.numberNode.indexOf(".")&&h(e,"Invalid number has two dots"),e.numberNode+=i):"e"===i||"E"===i?((-1!==e.numberNode.indexOf("e")||-1!==e.numberNode.indexOf("E"))&&h(e,"Invalid number has two exponential"),e.numberNode+=i):"+"===i||"-"===i?("e"!==s&&"E"!==s&&h(e,"Invalid symbol in number"),e.numberNode+=i):(l(e),o--,e.state=e.stack.pop()||A.VALUE);continue;default:h(e,"Unknown state: "+e.state)}return e.position>=e.bufferCheckPosition&&r(e),e}var L,_;if(L="object"==typeof process&&process.env?process.env:t,"function"==typeof FastList)_=FastList;else if("function"==typeof require)try{_=require("fast-list")}catch(b){_=Array}else _=Array;n.parser=function(t){return new i(t)},n.CParser=i,n.CStream=a,n.createStream=s,n.MAX_BUFFER_LENGTH=65536,n.DEBUG="debug"===L.CDEBUG,n.INFO="debug"===L.CDEBUG||"info"===L.CDEBUG,n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var N,v=["textNode","numberNode"],y=n.EVENTS.filter(function(t){return"error"!==t&&"end"!==t}),A=0;n.STATE={BEGIN:A++,VALUE:A++,OPEN_OBJECT:A++,CLOSE_OBJECT:A++,OPEN_ARRAY:A++,CLOSE_ARRAY:A++,TEXT_ESCAPE:A++,STRING:A++,BACKSLASH:A++,END:A++,OPEN_KEY:A++,CLOSE_KEY:A++,TRUE:A++,TRUE2:A++,TRUE3:A++,FALSE:A++,FALSE2:A++,FALSE3:A++,FALSE4:A++,NULL:A++,NULL2:A++,NULL3:A++,NUMBER_DECIMAL_POINT:A++,NUMBER_DIGIT:A++};for(var O in n.STATE)n.STATE[n.STATE[O]]=O;A=n.STATE,Object.create||(Object.create=function(t){function e(){this.__proto__=t}return e.prototype=t,new e}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e});var T=/[\\"\n]/g;i.prototype={end:function(){p(this)},write:E,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{N=require("stream").Stream}catch(m){N=function(){}}a.prototype=Object.create(N.prototype,{constructor:{value:a}}),a.prototype.write=function(t){return this._parser.write(""+t),this.emit("data",t),!0},a.prototype.end=function(t){return t&&t.length&&this._parser.write(""+t),this._parser.end(),!0},a.prototype.on=function(t,e){var n=this;return n._parser["on"+t]||-1===y.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e)}),N.prototype.on.call(n,t,e)},a.prototype.destroy=function(){o(this._parser),this.emit("close")}}("undefined"==typeof exports?clarinet={}:exports);var l=function(){function e(t,e,n){t.onprogress=e,t.onload=n}function n(e,n,r){var o=t.setInterval(n,0);e.onreadystatechange=function(){4==this.readyState&&(200==this.status&&r(),t.clearInterval(o))}}function r(){return"onprogress"in new XMLHttpRequest}var i=r()?e:n;return function(t,e,n){function r(){try{var t=a.responseText}catch(n){return}if(o(t)>c){var r=t.substr(c);e(r),c=o(t)}}function s(){r(),n(a.responseText)}n=n||u;var a=new XMLHttpRequest,c=0;a.open("GET",t,!0),a.send(null),i(a,r,s)}}(),d=function(){function t(t,e,n,r,o,i){var s=t(r,o,i-1);return s&&l(e,s,o,i)}function r(e,n,r,o,i,s){return o[s]==r&&t(e,n,r,o,i,s)}function i(t,n,r,o,s,a){return-1>a?!1:-1==a||t(o,s,a)||i(t,e,e,o,s,a-1)}function s(t,e,n,r,o,i){return-1==i&&l(e,!0,o,i)}function f(t,e,r,i,s){var a=t(i,s,o(i)-1);return a===!0?n(s):a}function l(t,e,n,r){return t?n[r+1]:e||!0}function d(t,e,n,r,i){var s=t.exec(n);if(s){var a=e(r,s),c=n.substr(o(s[0]));return i(c,a)}}function h(t,e,n){var r=!!n[1],o=n[2];return c(t,e,r,o)}function p(t){return t}function E(t,e){var n=e?c(h,e):p;return c(d,t,n)}function L(t,e){return e}function _(t,e){function n(){throw Error('"'+t+'" could not be tokenised')}var r=t?_:L;return a(S,[t,e,r],n)}var b=/^(\$?)(\w+)/,N=/^(\$?)\["(\w+)"\]/,v=/^(\$?)\[(\d+)\]/,y=/^(\$?)\*/,A=/^(\$?)\[\*\]/,O=/^\.\./,T=/^\./,m=/^(\$?)!/,U=/^$/,S=[E(b,r),E(N,r),E(v,r),E(y,t),E(A,t),E(O,i),E(T),E(m,s),E(U,f)];return function(t){try{return _(t,u)}catch(e){throw Error('Could not compile "'+t+'" because '+e.message)}}}(),h=function(){"use strict";function n(t){var e=clarinet.parser(t),n=[],r=[];this._nodeFoundListeners=n,this._pathMatchedListeners=r,this._errorListeners=[],this._clarinet=e,this._jsonBuilder=f(e,this._notifyListeners.bind(this,n),this._notifyListeners.bind(this,r)),e.onerror=function(t){this.notifyErrors(t),this.close()}.bind(this)}function r(e,n,r){r=r||t;var o=d(e);return function(t,e,i,s){var a=o(e,s);if(a!==!1)try{n.call(r,a,e,i)}catch(c){this.notifyErrors(Error("Error thrown by callback "+c.message))}}}function o(t,e,n,o){t.push(r(e,n,o))}function i(t,e){for(var n in e)o(t,n,e[n])}function a(t,e,n,r){"string"==typeof e?o(t,e,n,r):i(t,e)}var c=n.prototype;return c.fetch=function(t,e){return l(t,this.read.bind(this),function(){this.close(),(e||u)(this._jsonBuilder.getRoot())}.bind(this)),this},c.read=function(t){if(this.closed)throw Error("closed");try{this._clarinet.write(t)}catch(e){}},c.close=function(){this.closed=!0,this._nodeFoundListeners=[],this._pathMatchedListeners=[],this._errorListeners=[];var t=this._clarinet;t.onkey=t.onvalue=t.onopenobject=t.onopenarray=t.onend=t.oncloseobject=t.onclosearray=t.onerror=e,t.close()},c._notifyListeners=function(t,e,n,r){var o=r.concat([e]);s(t,this,e,n,r,o)},c.notifyErrors=function(t){s(this._errorListeners,e,t)},c.onPath=function(t,e,n){return a(this._pathMatchedListeners,t,e,n),this},c.onFind=function(t,e,n){return a(this._nodeFoundListeners,t,e,n),this},c.onError=function(t){return this._errorListeners.push(t),this},{parser:function(t){return new n(t)},fetch:function(t,e){return new n({}).fetch(t,e)}}}();t.oboe=h})(window);