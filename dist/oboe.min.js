(function(n,t,e,r,o){function i(n,t){return n.apply(o,t)}function u(n,t){n.forEach(function(n){i(n,t)})}function a(n){var t=n.length-1;return function(){var r=arguments.length-t,o=e.prototype.slice.call(arguments);return o.push(o.splice(t,r)),n.apply(this,o)}}function c(n,t){return function(e){return n(e)&&t(e)}}function s(n,t){return t&&t.constructor===n}function f(n,t){return t[n]}function l(n){return n!==o}function d(){return!0}function E(n,e){return e instanceof t&&b(function(n){return n in e},n)}function p(n,t){return[n,t]}function h(n){function t(n,e){return n?t(I(n),p(x(n),e)):e}return t(n,B)}function N(n){if(n){var t=N(I(n));return t.unshift(x(n)),t}return[]}function v(n,t){return t?p(n(x(t)),v(n,I(t))):B}function L(n,t,e){return e?n(L(n,t,I(e)),x(e)):t}function b(n,t){return!t||n(x(t))&&b(n,I(t))}function A(n){for(var t=B,e=n.length;e--;)t=p(n[e],t);return t}function y(n,t,e,r,o){function i(n){return n?k(n)?n:JSON.stringify(n):null}function u(n,t,e){n.onprogress=t,n.onload=e}function a(n,t,e){n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(t(),e())}}function c(){var n=s.responseText;r(n.substr(d)),d=R(n)}var s=new XMLHttpRequest,f="onprogress"in s,l=f?u:a,d=0;l(s,c,o),s.open(n,t,!0),s.send(i(e))}function _(n,t){function r(n,t){var r=M(x(n));s(e,r)&&c(R(r),t)}function i(n){if(!d)return E=n,c(D,n),o;r(d,n);var t=I(d),e=x(t),i=x(d),s=a(G(i),n);u(e,s),d=p(s,t)}function u(n,t){M(n)[G(t)]=M(t)}function a(n,t){return{key:n,node:t}}function c(n,e){var r=a(n,e);d&&u(x(d),r),d=p(r,d),t(j,d)}function f(){t(Y,d),d=I(d)}var d,E;return n.onopenobject=function(n){i({}),l(n)&&c(n)},n.onopenarray=function(){i([])},n.onkey=c,n.onvalue=function(n){i(n),f()},n.oncloseobject=n.onclosearray=f,function(){return E}}function T(){var n={n:[],p:[],e:[]};return{notify:a(function(t,e){u(n[t],e)}),on:function(t,e){return n[t].push(e),this}}}function m(n,t,e){function r(t,e){for(var r in e)n.addNewCallback(t,r,e[r])}function o(t,e,o,i){return k(e)?n.addNewCallback(t,e,o.bind(i)):r(t,e),this}return{onPath:w(o,j),onNode:w(o,Y),onError:w(t.on,J),root:e}}function O(n,t,e){function o(n,r,o,i){y(n,r,o,function(n){try{t.write(n)}catch(e){}},function(){t.close(),i&&i(e())})}function i(t,e,o){var i=V(e);n.on(t,function(t){try{var a=i(t)}catch(c){n.notify(J,r("Error evaluating pattern "+e+": "+c.message))}if(a!==!1)try{u(o,a,t)}catch(c){n.notify(J,r("Error thrown by callback: "+c.message))}})}function u(n,t,e){var r=h(e),o=N(I(v(G,r))),i=N(v(M,r));n(M(t),o,i)}return t.onerror=function(e){n.notify(J,e),t.close()},{addNewCallback:i,start:o}}var S=function(n){return a(function(t){for(var e,r=0;R(n)>r;r++)if(e=i(n[r],t))return e})},U=a(S),w=a(function(n,t){return a(function(e){return n.apply(this,t.concat(e))})}),g=a(function(n){function t(n,t){return t(n)}var e=A(n);return function(n){return L(t,n,e)}}),C=w(w,f),R=C("length"),k=w(s,String),x=C(0),I=C(1),B=null,P=a(A);(function(){function n(n,t,e){var r=n.prototype;r[t]=r[t]||e}n(e,"forEach",function(n){for(var t=0;R(this)>t;t++)n(this[t])}),n(e,"filter",function(n){var t=[];return this.forEach(function(e){n(e)&&t.push(e)}),t}),n(Function,"bind",function(n){var t=this;return function(){return t.apply(n,arguments)}})})(),function(i){function u(n){for(var t=Math.max(i.MAX_BUFFER_LENGTH,10),e=0,r=0,o=T.length;o>r;r++){var u=n[T[r]].length;if(u>t)switch(T[r]){case"text":closeText(n);break;default:N(n,"Max buffer length exceeded: "+T[r])}e=Math.max(e,u)}n.bufferCheckPosition=i.MAX_BUFFER_LENGTH-e+n.position}function a(n){for(var t=0,e=T.length;e>t;t++)n[T[t]]=""}function c(n){if(!(this instanceof c))return new c(n);var t=this;a(t),t.bufferCheckPosition=i.MAX_BUFFER_LENGTH,t.q=t.c=t.p="",t.opt=n||{},t.closed=t.closedRoot=t.sawRoot=!1,t.tag=t.error=null,t.state=O.BEGIN,t.stack=new A,t.position=t.column=0,t.line=1,t.slashed=!1,t.unicodeI=0,t.unicodeS=null,l(t,"onready")}function s(n){return new f(n)}function f(n){if(!(this instanceof f))return new f(n);this._parser=new c(n),this.writable=!0,this.readable=!0;var e=this;_.apply(e),this._parser.onend=function(){e.emit("end")},this._parser.onerror=function(n){e.emit("error",n),e._parser.error=null},m.forEach(function(n){t.defineProperty(e,"on"+n,{get:function(){return e._parser["on"+n]},set:function(t){return t?(e.on(n,t),o):(e.removeAllListeners(n),e._parser["on"+n]=t,t)},enumerable:!0,configurable:!1})})}function l(n,t,e){i.INFO&&console.log("-- emit",t,e),n[t]&&n[t](e)}function d(n,t,e){E(n),l(n,t,e)}function E(n,t){n.textNode=h(n.opt,n.textNode),n.textNode&&l(n,t?t:"onvalue",n.textNode),n.textNode=""}function p(n){n.numberNode&&l(n,"onvalue",parseFloat(n.numberNode)),n.numberNode=""}function h(n,t){return n.trim&&(t=t.trim()),n.normalize&&(t=t.replace(/\s+/g," ")),t}function N(n,t){return E(n),t+="\nLine: "+n.line+"\nColumn: "+n.column+"\nChar: "+n.c,t=new r(t),n.error=t,l(n,"onerror",t),n}function v(n){return n.state!==O.VALUE&&N(n,"Unexpected end"),E(n),n.c="",n.closed=!0,l(n,"onend"),c.call(n,n.opt),n}function L(n){var t=this;if(this.error)throw this.error;if(t.closed)return N(t,"Cannot write after close. Assign an onready handler.");if(null===n)return v(t);var e=0,r=n[0],o=t.p;for(i.DEBUG&&console.log("write -> ["+n+"]");r&&(o=r,t.c=r=n.charAt(e++),o!==r?t.p=o:o=t.p,r);)switch(i.DEBUG&&console.log(e,r,i.STATE[t.state]),t.position++,"\n"===r?(t.line++,t.column=0):t.column++,t.state){case O.BEGIN:"{"===r?t.state=O.OPEN_OBJECT:"["===r?t.state=O.OPEN_ARRAY:"\r"!==r&&"\n"!==r&&" "!==r&&"	"!==r&&N(t,"Non-whitespace before {[.");continue;case O.OPEN_KEY:case O.OPEN_OBJECT:if("\r"===r||"\n"===r||" "===r||"	"===r)continue;if(t.state===O.OPEN_KEY)t.stack.push(O.CLOSE_KEY);else{if("}"===r){l(t,"onopenobject"),l(t,"oncloseobject"),t.state=t.stack.pop()||O.VALUE;continue}t.stack.push(O.CLOSE_OBJECT)}'"'===r?t.state=O.STRING:N(t,'Malformed object key should start with "');continue;case O.CLOSE_KEY:case O.CLOSE_OBJECT:if("\r"===r||"\n"===r||" "===r||"	"===r)continue;t.state===O.CLOSE_KEY?"key":"object",":"===r?(t.state===O.CLOSE_OBJECT?(t.stack.push(O.CLOSE_OBJECT),E(t,"onopenobject")):E(t,"onkey"),t.state=O.VALUE):"}"===r?(d(t,"oncloseobject"),t.state=t.stack.pop()||O.VALUE):","===r?(t.state===O.CLOSE_OBJECT&&t.stack.push(O.CLOSE_OBJECT),E(t),t.state=O.OPEN_KEY):N(t,"Bad object");continue;case O.OPEN_ARRAY:case O.VALUE:if("\r"===r||"\n"===r||" "===r||"	"===r)continue;if(t.state===O.OPEN_ARRAY){if(l(t,"onopenarray"),t.state=O.VALUE,"]"===r){l(t,"onclosearray"),t.state=t.stack.pop()||O.VALUE;continue}t.stack.push(O.CLOSE_ARRAY)}'"'===r?t.state=O.STRING:"{"===r?t.state=O.OPEN_OBJECT:"["===r?t.state=O.OPEN_ARRAY:"t"===r?t.state=O.TRUE:"f"===r?t.state=O.FALSE:"n"===r?t.state=O.NULL:"-"===r?t.numberNode+=r:"0"===r?(t.numberNode+=r,t.state=O.NUMBER_DIGIT):-1!=="123456789".indexOf(r)?(t.numberNode+=r,t.state=O.NUMBER_DIGIT):N(t,"Bad value");continue;case O.CLOSE_ARRAY:if(","===r)t.stack.push(O.CLOSE_ARRAY),E(t,"onvalue"),t.state=O.VALUE;else if("]"===r)d(t,"onclosearray"),t.state=t.stack.pop()||O.VALUE;else{if("\r"===r||"\n"===r||" "===r||"	"===r)continue;N(t,"Bad array")}continue;case O.STRING:var a=e-1,c=t.slashed,s=t.unicodeI;n:for(;;){for(i.DEBUG&&console.log(e,r,i.STATE[t.state],c);s>0;)if(t.unicodeS+=r,r=n.charAt(e++),4===s?(t.textNode+=String.fromCharCode(parseInt(t.unicodeS,16)),s=0,a=e-1):s++,!r)break n;if('"'===r&&!c){t.state=t.stack.pop()||O.VALUE,t.textNode+=n.substring(a,e-1),t.textNode||l(t,"onvalue","");break}if("\\"===r&&!c&&(c=!0,t.textNode+=n.substring(a,e-1),r=n.charAt(e++),!r))break;if(c){if(c=!1,"n"===r?t.textNode+="\n":"r"===r?t.textNode+="\r":"t"===r?t.textNode+="	":"f"===r?t.textNode+="\f":"b"===r?t.textNode+="\b":"u"===r?(s=1,t.unicodeS=""):t.textNode+=r,r=n.charAt(e++),a=e-1,r)continue;break}U.lastIndex=e;var f=U.exec(n);if(null===f){e=n.length+1,t.textNode+=n.substring(a,e-1);break}if(e=f.index+1,r=n.charAt(f.index),!r){t.textNode+=n.substring(a,e-1);break}}t.slashed=c,t.unicodeI=s;continue;case O.TRUE:if(""===r)continue;"r"===r?t.state=O.TRUE2:N(t,"Invalid true started with t"+r);continue;case O.TRUE2:if(""===r)continue;"u"===r?t.state=O.TRUE3:N(t,"Invalid true started with tr"+r);continue;case O.TRUE3:if(""===r)continue;"e"===r?(l(t,"onvalue",!0),t.state=t.stack.pop()||O.VALUE):N(t,"Invalid true started with tru"+r);continue;case O.FALSE:if(""===r)continue;"a"===r?t.state=O.FALSE2:N(t,"Invalid false started with f"+r);continue;case O.FALSE2:if(""===r)continue;"l"===r?t.state=O.FALSE3:N(t,"Invalid false started with fa"+r);continue;case O.FALSE3:if(""===r)continue;"s"===r?t.state=O.FALSE4:N(t,"Invalid false started with fal"+r);continue;case O.FALSE4:if(""===r)continue;"e"===r?(l(t,"onvalue",!1),t.state=t.stack.pop()||O.VALUE):N(t,"Invalid false started with fals"+r);continue;case O.NULL:if(""===r)continue;"u"===r?t.state=O.NULL2:N(t,"Invalid null started with n"+r);continue;case O.NULL2:if(""===r)continue;"l"===r?t.state=O.NULL3:N(t,"Invalid null started with nu"+r);continue;case O.NULL3:if(""===r)continue;"l"===r?(l(t,"onvalue",null),t.state=t.stack.pop()||O.VALUE):N(t,"Invalid null started with nul"+r);continue;case O.NUMBER_DECIMAL_POINT:"."===r?(t.numberNode+=r,t.state=O.NUMBER_DIGIT):N(t,"Leading zero not followed by .");continue;case O.NUMBER_DIGIT:-1!=="0123456789".indexOf(r)?t.numberNode+=r:"."===r?(-1!==t.numberNode.indexOf(".")&&N(t,"Invalid number has two dots"),t.numberNode+=r):"e"===r||"E"===r?((-1!==t.numberNode.indexOf("e")||-1!==t.numberNode.indexOf("E"))&&N(t,"Invalid number has two exponential"),t.numberNode+=r):"+"===r||"-"===r?("e"!==o&&"E"!==o&&N(t,"Invalid symbol in number"),t.numberNode+=r):(p(t),e--,t.state=t.stack.pop()||O.VALUE);continue;default:N(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&u(t),t}var b,A;if(b="object"==typeof process&&process.env?process.env:n,"function"==typeof FastList)A=FastList;else if("function"==typeof require)try{A=require("fast-list")}catch(y){A=e}else A=e;i.parser=function(n){return new c(n)},i.CParser=c,i.CStream=f,i.createStream=s,i.MAX_BUFFER_LENGTH=65536,i.DEBUG="debug"===b.CDEBUG,i.INFO="debug"===b.CDEBUG||"info"===b.CDEBUG,i.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var _,T=["textNode","numberNode"],m=i.EVENTS.filter(function(n){return"error"!==n&&"end"!==n}),O=0;i.STATE={BEGIN:O++,VALUE:O++,OPEN_OBJECT:O++,CLOSE_OBJECT:O++,OPEN_ARRAY:O++,CLOSE_ARRAY:O++,TEXT_ESCAPE:O++,STRING:O++,BACKSLASH:O++,END:O++,OPEN_KEY:O++,CLOSE_KEY:O++,TRUE:O++,TRUE2:O++,TRUE3:O++,FALSE:O++,FALSE2:O++,FALSE3:O++,FALSE4:O++,NULL:O++,NULL2:O++,NULL3:O++,NUMBER_DECIMAL_POINT:O++,NUMBER_DIGIT:O++};for(var S in i.STATE)i.STATE[i.STATE[S]]=S;O=i.STATE,t.create||(t.create=function(n){function t(){this.__proto__=n}return t.prototype=n,new t}),t.getPrototypeOf||(t.getPrototypeOf=function(n){return n.__proto__}),t.keys||(t.keys=function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t});var U=/[\\"\n]/g;c.prototype={end:function(){v(this)},write:L,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{_=require("stream").Stream}catch(w){_=function(){}}f.prototype=t.create(_.prototype,{constructor:{value:f}}),f.prototype.write=function(n){return this._parser.write(""+n),this.emit("data",n),!0},f.prototype.end=function(n){return n&&n.length&&this._parser.write(""+n),this._parser.end(),!0},f.prototype.on=function(n,t){var r=this;return r._parser["on"+n]||-1===m.indexOf(n)||(r._parser["on"+n]=function(){var t=1===arguments.length?[arguments[0]]:e.apply(null,arguments);t.splice(0,0,n),r.emit.apply(r,t)}),_.prototype.on.call(r,n,t)},f.prototype.destroy=function(){a(this._parser),this.emit("close")}}("undefined"==typeof exports?clarinet={}:exports);var F=function(){var n=function n(n){return n.exec.bind(n)},t=a(function(t){return t.unshift(/^/),n(RegExp(t.map(C("source")).join("")))}),e=/(\$?)/,r=/(\w+|\*)/,o=/()/,i=/\["(\w+)"\]/,u=/\[(\d+|\*)\]/,c=/{([\w ]*?)}/,s=/(?:{([\w ]*?)})?/,f=t(e,r,s),l=t(e,i,s),d=t(e,u,s),E=t(e,o,c),p=t(/\.\./),h=t(/\./),N=t(e,/!/),v=t(/$/);return function(n){return n(U(f,l,d,E),p,h,N,v)}}(),G=C("key"),M=C("node"),D={r:1},V=F(function(n,t,e,o,i){function u(n,t){var e=t[m],r=e&&"*"!=e?function(n){return S(n)==e}:d;return c(r,n)}function a(n,t){var e=t[O];if(!e)return n;var r=w(E,A(e.split(/\W+/))),o=g(r,M,x);return c(o,n)}function s(n,t){var e=!!t[T];return e?c(n,x):n}function f(n){function t(n){return S(n)!=D}return n==d?d:c(t,g(n,I))}function l(n){function t(n){return n?i(n):!1}if(n==d)return d;var e=p(),r=n,o=f(t),i=U(e,r,o);return t}function p(){return function(n){return S(n)==D}}function h(n){return function(t){var e=n(t);return e===!0?x(t):e}}function N(n,t,e){return L(function(n,t){return t(n,e)},t,n)}function v(n,t,e,r,o){var i=n(e);if(i){var u=N(t,r,i),a=e.substr(R(i[0]));return o(a,u)}}function b(n,t){return w(v,n,t)}function y(n,t){return t}function _(n,t){var e=n?_:y;return C(n,t,e)}var T=1,m=2,O=3,S=g(G,x),C=U(b(n,P(s,a,u,f)),b(t,P(l)),b(e,P()),b(o,P(s,p)),b(i,P(h)),function(n){throw r('"'+n+'" could not be tokenised')});return function(n){try{return _(n,d)}catch(t){throw r('Could not compile "'+n+'" because '+t.message)}}}),Y="n",j="p",J="e";(function(){function t(n,t){return function(e){var r=T(),i=clarinet.parser(),u=_(i,r.notify),a=O(r,i,u),c=a.start.bind(a,n);return k(e)?c(e,t?arguments[1]:o,arguments[t?2:1]):c(e.url,e.body,e.complete),m(a,r,u)}}n.oboe={doGet:t("GET"),doDelete:t("DELETE"),doPost:t("POST",!0),doPut:t("PUT",!0)}})()})(window,Object,Array,Error);