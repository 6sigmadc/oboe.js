(function(t,n,e,r,o){function u(t,n){return t.apply(o,n)}function i(t,n){t.forEach(function(t){u(t,n)})}function a(t,n,e){for(var r,o=0;O(t)>o;o++)if(r=u(t[o],n))return r;return e&&e()}function c(t){var n=l(arguments,1);return function(){var e=n.concat(l(arguments));return t.apply(this,e)}}function s(t,n){return n&&n.constructor===t}function f(t,n){return n[t]}function l(t,n){return e.prototype.slice.call(t,n)}function E(t){return t!==o}function d(){return!0}function p(t,e){return e instanceof n&&t.every(function(t){return t in e})}function h(t,n){return[t,n]}function N(t){function n(t,e){return t?n(U(t),h(S(t),e)):e}return n(t,g)}function v(t){if(t){var n=v(U(t));return n.unshift(S(t)),n}return[]}function L(t,n,e,r,o){function u(t){return t?T(t)?t:JSON.stringify(t):null}function i(t,n,e){t.onprogress=n,t.onload=e}function a(t,n,e){t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(n(),e())}}function c(){var t=s.responseText;r(t.substr(E)),E=O(t)}var s=new XMLHttpRequest,f="onprogress"in s,l=f?i:a,E=0;l(s,c,o),s.open(t,n,!0),s.send(u(e))}function b(t,n){function e(t,n){m(n)&&u(n.length,t),n[S(c)]=t}function r(t){a?e(t,S(a)):(s=t,u(R,t)),a=h(t,a)}function u(t,e){E(e)||(S(a)[t]=o),c=h(t,c),n(I,c,h(e,a))}function i(){n(x,c,a),a=U(a),c=U(c)}var a,c,s;return t.onopenobject=function(t){r({}),E(t)&&u(t)},t.onopenarray=function(){r([])},t.onkey=u,t.onvalue=function(t){r(t),i()},t.oncloseobject=t.onclosearray=i,function(){return s}}function A(){var t={n:[],p:[],e:[]};return{notify:function(n){i(t[n],l(arguments,1))},on:function(n,e){return t[n].push(e),this}}}function y(t,n,e){function r(n,e){for(var r in e)t.addNewCallback(n,r,e[r])}function o(n,e,o,u){return T(e)?t.addNewCallback(n,e,o.bind(u)):r(n,e),this}return{onPath:c(o,I),onNode:c(o,x),onError:c(n.on,k),root:e}}function _(t,n,e){function o(t,r,o,u){L(t,r,o,function(t){try{n.write(t)}catch(e){}},function(){n.close(),u&&u(e())})}function u(n,e,o){var u=C(e);t.on(n,function(n,i){try{var a=u(n,i)}catch(c){t.notify(k,r("Error evaluating pattern "+e+": "+c.message))}if(a!==!1)try{o(a,v(U(N(n))),v(N(i)))}catch(c){t.notify(k,r("Error thrown by callback: "+c.message))}})}return n.onerror=function(e){t.notify(k,e),n.close()},{addNewCallback:u,start:o}}var m=c(s,e),T=c(s,String),O=c(f,"length"),S=c(f,0),U=c(f,1),g=null;(function(){function t(t,n,e){var r=t.prototype;r[n]=r[n]||e}t(e,"every",function(t){for(var n=0;O(this)>n;n++)if(!t(this[n]))return!1;return!0}),t(e,"forEach",function(t){this.every(function(n){return t(n),!0})}),t(e,"reduce",function(t,n){return this.forEach(function(e){n=t(n,e)}),n}),t(e,"filter",function(t){return this.reduce(function(n,e){return t(e)&&n.push(e),n},[])}),t(Function,"bind",function(t){var n=this;return function(){return n.apply(t,arguments)}})})(),function(u){function i(t){for(var n=Math.max(u.MAX_BUFFER_LENGTH,10),e=0,r=0,o=m.length;o>r;r++){var i=t[m[r]].length;if(i>n)switch(m[r]){case"text":closeText(t);break;default:N(t,"Max buffer length exceeded: "+m[r])}e=Math.max(e,i)}t.bufferCheckPosition=u.MAX_BUFFER_LENGTH-e+t.position}function a(t){for(var n=0,e=m.length;e>n;n++)t[m[n]]=""}function c(t){if(!(this instanceof c))return new c(t);var n=this;a(n),n.bufferCheckPosition=u.MAX_BUFFER_LENGTH,n.q=n.c=n.p="",n.opt=t||{},n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.state=O.BEGIN,n.stack=new A,n.position=n.column=0,n.line=1,n.slashed=!1,n.unicodeI=0,n.unicodeS=null,l(n,"onready")}function s(t){return new f(t)}function f(t){if(!(this instanceof f))return new f(t);this._parser=new c(t),this.writable=!0,this.readable=!0;var e=this;_.apply(e),this._parser.onend=function(){e.emit("end")},this._parser.onerror=function(t){e.emit("error",t),e._parser.error=null},T.forEach(function(t){n.defineProperty(e,"on"+t,{get:function(){return e._parser["on"+t]},set:function(n){return n?(e.on(t,n),o):(e.removeAllListeners(t),e._parser["on"+t]=n,n)},enumerable:!0,configurable:!1})})}function l(t,n,e){u.INFO&&console.log("-- emit",n,e),t[n]&&t[n](e)}function E(t,n,e){d(t),l(t,n,e)}function d(t,n){t.textNode=h(t.opt,t.textNode),t.textNode&&l(t,n?n:"onvalue",t.textNode),t.textNode=""}function p(t){t.numberNode&&l(t,"onvalue",parseFloat(t.numberNode)),t.numberNode=""}function h(t,n){return t.trim&&(n=n.trim()),t.normalize&&(n=n.replace(/\s+/g," ")),n}function N(t,n){return d(t),n+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c,n=new r(n),t.error=n,l(t,"onerror",n),t}function v(t){return t.state!==O.VALUE&&N(t,"Unexpected end"),d(t),t.c="",t.closed=!0,l(t,"onend"),c.call(t,t.opt),t}function L(t){var n=this;if(this.error)throw this.error;if(n.closed)return N(n,"Cannot write after close. Assign an onready handler.");if(null===t)return v(n);var e=0,r=t[0],o=n.p;for(u.DEBUG&&console.log("write -> ["+t+"]");r&&(o=r,n.c=r=t.charAt(e++),o!==r?n.p=o:o=n.p,r);)switch(u.DEBUG&&console.log(e,r,u.STATE[n.state]),n.position++,"\n"===r?(n.line++,n.column=0):n.column++,n.state){case O.BEGIN:"{"===r?n.state=O.OPEN_OBJECT:"["===r?n.state=O.OPEN_ARRAY:"\r"!==r&&"\n"!==r&&" "!==r&&"	"!==r&&N(n,"Non-whitespace before {[.");continue;case O.OPEN_KEY:case O.OPEN_OBJECT:if("\r"===r||"\n"===r||" "===r||"	"===r)continue;if(n.state===O.OPEN_KEY)n.stack.push(O.CLOSE_KEY);else{if("}"===r){l(n,"onopenobject"),l(n,"oncloseobject"),n.state=n.stack.pop()||O.VALUE;continue}n.stack.push(O.CLOSE_OBJECT)}'"'===r?n.state=O.STRING:N(n,'Malformed object key should start with "');continue;case O.CLOSE_KEY:case O.CLOSE_OBJECT:if("\r"===r||"\n"===r||" "===r||"	"===r)continue;n.state===O.CLOSE_KEY?"key":"object",":"===r?(n.state===O.CLOSE_OBJECT?(n.stack.push(O.CLOSE_OBJECT),d(n,"onopenobject")):d(n,"onkey"),n.state=O.VALUE):"}"===r?(E(n,"oncloseobject"),n.state=n.stack.pop()||O.VALUE):","===r?(n.state===O.CLOSE_OBJECT&&n.stack.push(O.CLOSE_OBJECT),d(n),n.state=O.OPEN_KEY):N(n,"Bad object");continue;case O.OPEN_ARRAY:case O.VALUE:if("\r"===r||"\n"===r||" "===r||"	"===r)continue;if(n.state===O.OPEN_ARRAY){if(l(n,"onopenarray"),n.state=O.VALUE,"]"===r){l(n,"onclosearray"),n.state=n.stack.pop()||O.VALUE;continue}n.stack.push(O.CLOSE_ARRAY)}'"'===r?n.state=O.STRING:"{"===r?n.state=O.OPEN_OBJECT:"["===r?n.state=O.OPEN_ARRAY:"t"===r?n.state=O.TRUE:"f"===r?n.state=O.FALSE:"n"===r?n.state=O.NULL:"-"===r?n.numberNode+=r:"0"===r?(n.numberNode+=r,n.state=O.NUMBER_DIGIT):-1!=="123456789".indexOf(r)?(n.numberNode+=r,n.state=O.NUMBER_DIGIT):N(n,"Bad value");continue;case O.CLOSE_ARRAY:if(","===r)n.stack.push(O.CLOSE_ARRAY),d(n,"onvalue"),n.state=O.VALUE;else if("]"===r)E(n,"onclosearray"),n.state=n.stack.pop()||O.VALUE;else{if("\r"===r||"\n"===r||" "===r||"	"===r)continue;N(n,"Bad array")}continue;case O.STRING:var a=e-1,c=n.slashed,s=n.unicodeI;t:for(;;){for(u.DEBUG&&console.log(e,r,u.STATE[n.state],c);s>0;)if(n.unicodeS+=r,r=t.charAt(e++),4===s?(n.textNode+=String.fromCharCode(parseInt(n.unicodeS,16)),s=0,a=e-1):s++,!r)break t;if('"'===r&&!c){n.state=n.stack.pop()||O.VALUE,n.textNode+=t.substring(a,e-1),n.textNode||l(n,"onvalue","");break}if("\\"===r&&!c&&(c=!0,n.textNode+=t.substring(a,e-1),r=t.charAt(e++),!r))break;if(c){if(c=!1,"n"===r?n.textNode+="\n":"r"===r?n.textNode+="\r":"t"===r?n.textNode+="	":"f"===r?n.textNode+="\f":"b"===r?n.textNode+="\b":"u"===r?(s=1,n.unicodeS=""):n.textNode+=r,r=t.charAt(e++),a=e-1,r)continue;break}U.lastIndex=e;var f=U.exec(t);if(null===f){e=t.length+1,n.textNode+=t.substring(a,e-1);break}if(e=f.index+1,r=t.charAt(f.index),!r){n.textNode+=t.substring(a,e-1);break}}n.slashed=c,n.unicodeI=s;continue;case O.TRUE:if(""===r)continue;"r"===r?n.state=O.TRUE2:N(n,"Invalid true started with t"+r);continue;case O.TRUE2:if(""===r)continue;"u"===r?n.state=O.TRUE3:N(n,"Invalid true started with tr"+r);continue;case O.TRUE3:if(""===r)continue;"e"===r?(l(n,"onvalue",!0),n.state=n.stack.pop()||O.VALUE):N(n,"Invalid true started with tru"+r);continue;case O.FALSE:if(""===r)continue;"a"===r?n.state=O.FALSE2:N(n,"Invalid false started with f"+r);continue;case O.FALSE2:if(""===r)continue;"l"===r?n.state=O.FALSE3:N(n,"Invalid false started with fa"+r);continue;case O.FALSE3:if(""===r)continue;"s"===r?n.state=O.FALSE4:N(n,"Invalid false started with fal"+r);continue;case O.FALSE4:if(""===r)continue;"e"===r?(l(n,"onvalue",!1),n.state=n.stack.pop()||O.VALUE):N(n,"Invalid false started with fals"+r);continue;case O.NULL:if(""===r)continue;"u"===r?n.state=O.NULL2:N(n,"Invalid null started with n"+r);continue;case O.NULL2:if(""===r)continue;"l"===r?n.state=O.NULL3:N(n,"Invalid null started with nu"+r);continue;case O.NULL3:if(""===r)continue;"l"===r?(l(n,"onvalue",null),n.state=n.stack.pop()||O.VALUE):N(n,"Invalid null started with nul"+r);continue;case O.NUMBER_DECIMAL_POINT:"."===r?(n.numberNode+=r,n.state=O.NUMBER_DIGIT):N(n,"Leading zero not followed by .");continue;case O.NUMBER_DIGIT:-1!=="0123456789".indexOf(r)?n.numberNode+=r:"."===r?(-1!==n.numberNode.indexOf(".")&&N(n,"Invalid number has two dots"),n.numberNode+=r):"e"===r||"E"===r?((-1!==n.numberNode.indexOf("e")||-1!==n.numberNode.indexOf("E"))&&N(n,"Invalid number has two exponential"),n.numberNode+=r):"+"===r||"-"===r?("e"!==o&&"E"!==o&&N(n,"Invalid symbol in number"),n.numberNode+=r):(p(n),e--,n.state=n.stack.pop()||O.VALUE);continue;default:N(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&i(n),n}var b,A;if(b="object"==typeof process&&process.env?process.env:t,"function"==typeof FastList)A=FastList;else if("function"==typeof require)try{A=require("fast-list")}catch(y){A=e}else A=e;u.parser=function(t){return new c(t)},u.CParser=c,u.CStream=f,u.createStream=s,u.MAX_BUFFER_LENGTH=65536,u.DEBUG="debug"===b.CDEBUG,u.INFO="debug"===b.CDEBUG||"info"===b.CDEBUG,u.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var _,m=["textNode","numberNode"],T=u.EVENTS.filter(function(t){return"error"!==t&&"end"!==t}),O=0;u.STATE={BEGIN:O++,VALUE:O++,OPEN_OBJECT:O++,CLOSE_OBJECT:O++,OPEN_ARRAY:O++,CLOSE_ARRAY:O++,TEXT_ESCAPE:O++,STRING:O++,BACKSLASH:O++,END:O++,OPEN_KEY:O++,CLOSE_KEY:O++,TRUE:O++,TRUE2:O++,TRUE3:O++,FALSE:O++,FALSE2:O++,FALSE3:O++,FALSE4:O++,NULL:O++,NULL2:O++,NULL3:O++,NUMBER_DECIMAL_POINT:O++,NUMBER_DIGIT:O++};for(var S in u.STATE)u.STATE[u.STATE[S]]=S;O=u.STATE,n.create||(n.create=function(t){function n(){this.__proto__=t}return n.prototype=t,new n}),n.getPrototypeOf||(n.getPrototypeOf=function(t){return t.__proto__}),n.keys||(n.keys=function(t){var n=[];for(var e in t)t.hasOwnProperty(e)&&n.push(e);return n});var U=/[\\"\n]/g;c.prototype={end:function(){v(this)},write:L,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{_=require("stream").Stream}catch(g){_=function(){}}f.prototype=n.create(_.prototype,{constructor:{value:f}}),f.prototype.write=function(t){return this._parser.write(""+t),this.emit("data",t),!0},f.prototype.end=function(t){return t&&t.length&&this._parser.write(""+t),this._parser.end(),!0},f.prototype.on=function(t,n){var r=this;return r._parser["on"+t]||-1===T.indexOf(t)||(r._parser["on"+t]=function(){var n=1===arguments.length?[arguments[0]]:e.apply(null,arguments);n.splice(0,0,t),r.emit.apply(r,n)}),_.prototype.on.call(r,t,n)},f.prototype.destroy=function(){a(this._parser),this.emit("close")}}("undefined"==typeof exports?clarinet={}:exports);var w=function(){function t(t){return RegExp(t.map(u).join(""))}function n(){var n=l(arguments);return n.unshift(/^/),t(n)}function e(n){return t([/\[/,n,/\]/])}function r(t){return function(n){return t.exec(n)}}function o(t){return a(g,[t])}var u=c(f,"source"),i=/(\$?)/,s=/(\w+)/,E=/()/,d=/\["(\w+)"\]/,p=e(/(\d+)/),h=e(/\*/),N=/{([\w ]*?)}/,v=/(?:{([\w ]*?)})?/,L=n(i,s,v),b=n(i,d,v),A=n(i,p,v),y=n(i,/\*/,v),_=n(i,h,v),m=n(i,E,N),T=n(/\.\./),O=n(/\./),S=n(i,/!/),U=n(/$/),g=[L,b,A,y,_,m].map(r);return function(t){return t(o,r(T),r(O),r(S),r(U))}}(),C=w(function(t,n,e,o,u){function i(t,n){var e=n[m],r=e?function(t){return t==e}:d;return function(n,e){return r(S(n))&&t(n,e)}}function s(t,n){var e=n[T];if(!e)return t;var r=e.split(/\W+/);return function(n,e){return p(r,S(e))&&t(n,e)}}function f(t,n){var e=!!n[_];return e?function(n,e){return t(n,e)&&S(e)}:t}function l(t){return t==d?d:function(n,e){return S(n)===R?!1:t(U(n),U(e))}}function E(t){function n(t,n){return n?a(u,arguments):!1}if(t==d)return d;var e=h(),r=t,o=l(n),u=[e,r,o];return n}function h(){return function(t){return S(t)==R}}function N(t){return function(n,e){var r=t(n,e);return r===!0?S(e):r}}function v(t,n,e){return t.reduce(function(t,n){return n(t,e)},n)}function L(t,n,e,r,o){var u=t(e);if(u){var i=v(n,r,u),a=e.substr(O(u[0]));return o(a,i)}}function b(t,n){return c(L,t,n)}function A(t,n){return n}function y(t,n){function e(){throw r('"'+t+'" could not be tokenised')}var o=t?y:A;return a(g,[t,n,o],e)}var _=1,m=2,T=3,g=[b(t,[l,i,s,f]),b(n,[E]),b(e,[]),b(o,[h,f]),b(u,[N])];return function(t){try{return y(t,d)}catch(n){throw r('Could not compile "'+t+'" because '+n.message)}}}),R={},x="n",I="p",k="e";(function(){function n(t,n){var e=n?1:-1,r=n?2:1;return function(n){var o,u,i,a=A(),c=clarinet.parser(),s=b(c,a.notify),f=_(a,c,s);return T(n)?(o=n,u=arguments[e],i=arguments[r]):(o=n.url,u=n.body,i=n.complete),f.start(t,o,u,i),y(f,a,s)}}t.oboe={doGet:n("GET"),doDelete:n("DELETE"),doPost:n("POST",!0),doPut:n("PUT",!0)}})()})(window,Object,Array,Error);