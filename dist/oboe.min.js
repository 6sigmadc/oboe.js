(function(n,t,e,r,o){function u(n,t){return n.apply(o,t)}function i(n,t){n.forEach(function(n){u(n,t)})}function a(n){function t(n,t,r){return e.prototype.slice.call(n,t,r)}var r=n.length-1;return function(){var e=t(arguments,0,r);return e.push(t(arguments,r)),n.apply(this,e)}}function c(n,t){return function(e){return n(e)&&t(e)}}function s(n,t){return t&&t.constructor===n}function f(n,t){return t[n]}function l(n){return n!==o}function E(){return!0}function d(n,e){return e instanceof t&&b(function(n){return n in e},n)}function p(n,t){return[n,t]}function h(n){function t(n,e){return n?t(I(n),p(x(n),e)):e}return t(n,B)}function N(n){if(n){var t=N(I(n));return t.unshift(x(n)),t}return[]}function v(n,t){return t?p(n(x(t)),v(n,I(t))):B}function L(n,t,e){return e?n(L(n,t,I(e)),x(e)):t}function b(n,t){return!t||n(x(t))&&b(n,I(t))}function A(n){for(var t=B,e=n.length;e--;)t=p(n[e],t);return t}function y(n,t,e,r,o){function u(n){return n?k(n)?n:JSON.stringify(n):null}function i(n,t,e){n.onprogress=t,n.onload=e}function a(n,t,e){n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(t(),e())}}function c(){var n=s.responseText;r(n.substr(E)),E=R(n)}var s=new XMLHttpRequest,f="onprogress"in s,l=f?i:a,E=0;l(s,c,o),s.open(n,t,!0),s.send(u(e))}function _(n,t){function r(n,t){var r=M(x(n));s(e,r)&&c(R(r),t)}function u(n){if(!E)return d=n,c(D,n),o;r(E,n);var t=I(E),e=x(t),u=x(E),s=a(G(u),n);i(e,s),E=p(s,t)}function i(n,t){M(n)[G(t)]=M(t)}function a(n,t){return{key:n,node:t}}function c(n,e){var r=a(n,e);E&&i(x(E),r),E=p(r,E),t(j,E)}function f(){t(Y,E),E=I(E)}var E,d;return n.onopenobject=function(n){u({}),l(n)&&c(n)},n.onopenarray=function(){u([])},n.onkey=c,n.onvalue=function(n){u(n),f()},n.oncloseobject=n.onclosearray=f,function(){return d}}function m(){var n={n:[],p:[],e:[]};return{notify:a(function(t,e){i(n[t],e)}),on:function(t,e){return n[t].push(e),this}}}function T(n,t,e){function r(t,e){for(var r in e)n.addNewCallback(t,r,e[r])}function o(t,e,o,u){return k(e)?n.addNewCallback(t,e,o.bind(u)):r(t,e),this}return{onPath:w(o,j),onNode:w(o,Y),onError:w(t.on,J),root:e}}function O(n,t,e){function o(n,r,o,u){y(n,r,o,function(n){try{t.write(n)}catch(e){}},function(){t.close(),u&&u(e())})}function u(t,e,o){var u=V(e);n.on(t,function(t){try{var a=u(t)}catch(c){n.notify(J,r("Error evaluating pattern "+e+": "+c.message))}if(a!==!1)try{i(o,a,t)}catch(c){n.notify(J,r("Error thrown by callback: "+c.message))}})}function i(n,t,e){var r=h(e),o=N(I(v(G,r))),u=N(v(M,r));n(M(t),o,u)}return t.onerror=function(e){n.notify(J,e),t.close()},{addNewCallback:u,start:o}}var S=function(n){return a(function(t){for(var e,r=0;R(n)>r;r++)if(e=u(n[r],t))return e})},U=a(S),w=a(function(n,t){return a(function(e){return n.apply(this,t.concat(e))})}),g=a(function(n){function t(n,t){return t(n)}var e=A(n);return function(n){return L(t,n,e)}}),C=w(w,f),R=C("length"),k=w(s,String),x=C(0),I=C(1),B=null,P=a(A);(function(){function n(n,t,e){var r=n.prototype;r[t]=r[t]||e}n(e,"forEach",function(n){for(var t=0;R(this)>t;t++)n(this[t])}),n(e,"filter",function(n){var t=[];return this.forEach(function(e){n(e)&&t.push(e)}),t}),n(Function,"bind",function(n){var t=this;return function(){return t.apply(n,arguments)}})})(),function(u){function i(n){for(var t=Math.max(u.MAX_BUFFER_LENGTH,10),e=0,r=0,o=m.length;o>r;r++){var i=n[m[r]].length;if(i>t)switch(m[r]){case"text":closeText(n);break;default:N(n,"Max buffer length exceeded: "+m[r])}e=Math.max(e,i)}n.bufferCheckPosition=u.MAX_BUFFER_LENGTH-e+n.position}function a(n){for(var t=0,e=m.length;e>t;t++)n[m[t]]=""}function c(n){if(!(this instanceof c))return new c(n);var t=this;a(t),t.bufferCheckPosition=u.MAX_BUFFER_LENGTH,t.q=t.c=t.p="",t.opt=n||{},t.closed=t.closedRoot=t.sawRoot=!1,t.tag=t.error=null,t.state=O.BEGIN,t.stack=new A,t.position=t.column=0,t.line=1,t.slashed=!1,t.unicodeI=0,t.unicodeS=null,l(t,"onready")}function s(n){return new f(n)}function f(n){if(!(this instanceof f))return new f(n);this._parser=new c(n),this.writable=!0,this.readable=!0;var e=this;_.apply(e),this._parser.onend=function(){e.emit("end")},this._parser.onerror=function(n){e.emit("error",n),e._parser.error=null},T.forEach(function(n){t.defineProperty(e,"on"+n,{get:function(){return e._parser["on"+n]},set:function(t){return t?(e.on(n,t),o):(e.removeAllListeners(n),e._parser["on"+n]=t,t)},enumerable:!0,configurable:!1})})}function l(n,t,e){u.INFO&&console.log("-- emit",t,e),n[t]&&n[t](e)}function E(n,t,e){d(n),l(n,t,e)}function d(n,t){n.textNode=h(n.opt,n.textNode),n.textNode&&l(n,t?t:"onvalue",n.textNode),n.textNode=""}function p(n){n.numberNode&&l(n,"onvalue",parseFloat(n.numberNode)),n.numberNode=""}function h(n,t){return n.trim&&(t=t.trim()),n.normalize&&(t=t.replace(/\s+/g," ")),t}function N(n,t){return d(n),t+="\nLine: "+n.line+"\nColumn: "+n.column+"\nChar: "+n.c,t=new r(t),n.error=t,l(n,"onerror",t),n}function v(n){return n.state!==O.VALUE&&N(n,"Unexpected end"),d(n),n.c="",n.closed=!0,l(n,"onend"),c.call(n,n.opt),n}function L(n){var t=this;if(this.error)throw this.error;if(t.closed)return N(t,"Cannot write after close. Assign an onready handler.");if(null===n)return v(t);var e=0,r=n[0],o=t.p;for(u.DEBUG&&console.log("write -> ["+n+"]");r&&(o=r,t.c=r=n.charAt(e++),o!==r?t.p=o:o=t.p,r);)switch(u.DEBUG&&console.log(e,r,u.STATE[t.state]),t.position++,"\n"===r?(t.line++,t.column=0):t.column++,t.state){case O.BEGIN:"{"===r?t.state=O.OPEN_OBJECT:"["===r?t.state=O.OPEN_ARRAY:"\r"!==r&&"\n"!==r&&" "!==r&&"	"!==r&&N(t,"Non-whitespace before {[.");continue;case O.OPEN_KEY:case O.OPEN_OBJECT:if("\r"===r||"\n"===r||" "===r||"	"===r)continue;if(t.state===O.OPEN_KEY)t.stack.push(O.CLOSE_KEY);else{if("}"===r){l(t,"onopenobject"),l(t,"oncloseobject"),t.state=t.stack.pop()||O.VALUE;continue}t.stack.push(O.CLOSE_OBJECT)}'"'===r?t.state=O.STRING:N(t,'Malformed object key should start with "');continue;case O.CLOSE_KEY:case O.CLOSE_OBJECT:if("\r"===r||"\n"===r||" "===r||"	"===r)continue;t.state===O.CLOSE_KEY?"key":"object",":"===r?(t.state===O.CLOSE_OBJECT?(t.stack.push(O.CLOSE_OBJECT),d(t,"onopenobject")):d(t,"onkey"),t.state=O.VALUE):"}"===r?(E(t,"oncloseobject"),t.state=t.stack.pop()||O.VALUE):","===r?(t.state===O.CLOSE_OBJECT&&t.stack.push(O.CLOSE_OBJECT),d(t),t.state=O.OPEN_KEY):N(t,"Bad object");continue;case O.OPEN_ARRAY:case O.VALUE:if("\r"===r||"\n"===r||" "===r||"	"===r)continue;if(t.state===O.OPEN_ARRAY){if(l(t,"onopenarray"),t.state=O.VALUE,"]"===r){l(t,"onclosearray"),t.state=t.stack.pop()||O.VALUE;continue}t.stack.push(O.CLOSE_ARRAY)}'"'===r?t.state=O.STRING:"{"===r?t.state=O.OPEN_OBJECT:"["===r?t.state=O.OPEN_ARRAY:"t"===r?t.state=O.TRUE:"f"===r?t.state=O.FALSE:"n"===r?t.state=O.NULL:"-"===r?t.numberNode+=r:"0"===r?(t.numberNode+=r,t.state=O.NUMBER_DIGIT):-1!=="123456789".indexOf(r)?(t.numberNode+=r,t.state=O.NUMBER_DIGIT):N(t,"Bad value");continue;case O.CLOSE_ARRAY:if(","===r)t.stack.push(O.CLOSE_ARRAY),d(t,"onvalue"),t.state=O.VALUE;else if("]"===r)E(t,"onclosearray"),t.state=t.stack.pop()||O.VALUE;else{if("\r"===r||"\n"===r||" "===r||"	"===r)continue;N(t,"Bad array")}continue;case O.STRING:var a=e-1,c=t.slashed,s=t.unicodeI;n:for(;;){for(u.DEBUG&&console.log(e,r,u.STATE[t.state],c);s>0;)if(t.unicodeS+=r,r=n.charAt(e++),4===s?(t.textNode+=String.fromCharCode(parseInt(t.unicodeS,16)),s=0,a=e-1):s++,!r)break n;if('"'===r&&!c){t.state=t.stack.pop()||O.VALUE,t.textNode+=n.substring(a,e-1),t.textNode||l(t,"onvalue","");break}if("\\"===r&&!c&&(c=!0,t.textNode+=n.substring(a,e-1),r=n.charAt(e++),!r))break;if(c){if(c=!1,"n"===r?t.textNode+="\n":"r"===r?t.textNode+="\r":"t"===r?t.textNode+="	":"f"===r?t.textNode+="\f":"b"===r?t.textNode+="\b":"u"===r?(s=1,t.unicodeS=""):t.textNode+=r,r=n.charAt(e++),a=e-1,r)continue;break}U.lastIndex=e;var f=U.exec(n);if(null===f){e=n.length+1,t.textNode+=n.substring(a,e-1);break}if(e=f.index+1,r=n.charAt(f.index),!r){t.textNode+=n.substring(a,e-1);break}}t.slashed=c,t.unicodeI=s;continue;case O.TRUE:if(""===r)continue;"r"===r?t.state=O.TRUE2:N(t,"Invalid true started with t"+r);continue;case O.TRUE2:if(""===r)continue;"u"===r?t.state=O.TRUE3:N(t,"Invalid true started with tr"+r);continue;case O.TRUE3:if(""===r)continue;"e"===r?(l(t,"onvalue",!0),t.state=t.stack.pop()||O.VALUE):N(t,"Invalid true started with tru"+r);continue;case O.FALSE:if(""===r)continue;"a"===r?t.state=O.FALSE2:N(t,"Invalid false started with f"+r);continue;case O.FALSE2:if(""===r)continue;"l"===r?t.state=O.FALSE3:N(t,"Invalid false started with fa"+r);continue;case O.FALSE3:if(""===r)continue;"s"===r?t.state=O.FALSE4:N(t,"Invalid false started with fal"+r);continue;case O.FALSE4:if(""===r)continue;"e"===r?(l(t,"onvalue",!1),t.state=t.stack.pop()||O.VALUE):N(t,"Invalid false started with fals"+r);continue;case O.NULL:if(""===r)continue;"u"===r?t.state=O.NULL2:N(t,"Invalid null started with n"+r);continue;case O.NULL2:if(""===r)continue;"l"===r?t.state=O.NULL3:N(t,"Invalid null started with nu"+r);continue;case O.NULL3:if(""===r)continue;"l"===r?(l(t,"onvalue",null),t.state=t.stack.pop()||O.VALUE):N(t,"Invalid null started with nul"+r);continue;case O.NUMBER_DECIMAL_POINT:"."===r?(t.numberNode+=r,t.state=O.NUMBER_DIGIT):N(t,"Leading zero not followed by .");continue;case O.NUMBER_DIGIT:-1!=="0123456789".indexOf(r)?t.numberNode+=r:"."===r?(-1!==t.numberNode.indexOf(".")&&N(t,"Invalid number has two dots"),t.numberNode+=r):"e"===r||"E"===r?((-1!==t.numberNode.indexOf("e")||-1!==t.numberNode.indexOf("E"))&&N(t,"Invalid number has two exponential"),t.numberNode+=r):"+"===r||"-"===r?("e"!==o&&"E"!==o&&N(t,"Invalid symbol in number"),t.numberNode+=r):(p(t),e--,t.state=t.stack.pop()||O.VALUE);continue;default:N(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&i(t),t}var b,A;if(b="object"==typeof process&&process.env?process.env:n,"function"==typeof FastList)A=FastList;else if("function"==typeof require)try{A=require("fast-list")}catch(y){A=e}else A=e;u.parser=function(n){return new c(n)},u.CParser=c,u.CStream=f,u.createStream=s,u.MAX_BUFFER_LENGTH=65536,u.DEBUG="debug"===b.CDEBUG,u.INFO="debug"===b.CDEBUG||"info"===b.CDEBUG,u.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var _,m=["textNode","numberNode"],T=u.EVENTS.filter(function(n){return"error"!==n&&"end"!==n}),O=0;u.STATE={BEGIN:O++,VALUE:O++,OPEN_OBJECT:O++,CLOSE_OBJECT:O++,OPEN_ARRAY:O++,CLOSE_ARRAY:O++,TEXT_ESCAPE:O++,STRING:O++,BACKSLASH:O++,END:O++,OPEN_KEY:O++,CLOSE_KEY:O++,TRUE:O++,TRUE2:O++,TRUE3:O++,FALSE:O++,FALSE2:O++,FALSE3:O++,FALSE4:O++,NULL:O++,NULL2:O++,NULL3:O++,NUMBER_DECIMAL_POINT:O++,NUMBER_DIGIT:O++};for(var S in u.STATE)u.STATE[u.STATE[S]]=S;O=u.STATE,t.create||(t.create=function(n){function t(){this.__proto__=n}return t.prototype=n,new t}),t.getPrototypeOf||(t.getPrototypeOf=function(n){return n.__proto__}),t.keys||(t.keys=function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t});var U=/[\\"\n]/g;c.prototype={end:function(){v(this)},write:L,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{_=require("stream").Stream}catch(w){_=function(){}}f.prototype=t.create(_.prototype,{constructor:{value:f}}),f.prototype.write=function(n){return this._parser.write(""+n),this.emit("data",n),!0},f.prototype.end=function(n){return n&&n.length&&this._parser.write(""+n),this._parser.end(),!0},f.prototype.on=function(n,t){var r=this;return r._parser["on"+n]||-1===T.indexOf(n)||(r._parser["on"+n]=function(){var t=1===arguments.length?[arguments[0]]:e.apply(null,arguments);t.splice(0,0,n),r.emit.apply(r,t)}),_.prototype.on.call(r,n,t)},f.prototype.destroy=function(){a(this._parser),this.emit("close")}}("undefined"==typeof exports?clarinet={}:exports);var F=function(){function n(n){return function(t){return n.exec(t)}}var t=a(function(n){return n.unshift(/^/),RegExp(n.map(C("source")).join(""))}),e=/(\$?)/,r=/(\w+|\*)/,o=/()/,u=/\["(\w+)"\]/,i=/\[(\d+|\*)\]/,c=/{([\w ]*?)}/,s=/(?:{([\w ]*?)})?/,f=t(e,r,s),l=t(e,u,s),E=t(e,i,s),d=t(e,o,c),p=t(/\.\./),h=t(/\./),N=t(e,/!/),v=t(/$/);return function(t){return t(S([f,l,E,d].map(n)),n(p),n(h),n(N),n(v))}}(),G=C("key"),M=C("node"),D={r:1},V=F(function(n,t,e,o,u){function i(n,t){var e,r=t[T];return e=r&&"*"!=r?function(n){return S(n)==r}:E,c(e,n)}function a(n,t){var e=t[O];if(!e)return n;var r=w(d,A(e.split(/\W+/))),o=g(r,M,x);return c(o,n)}function s(n,t){var e=!!t[m];return e?c(n,x):n}function f(n){function t(n){return S(n)!=D}return n==E?E:c(t,g(n,I))}function l(n){function t(n){return n?u(n):!1}if(n==E)return E;var e=p(),r=n,o=f(t),u=U(e,r,o);return t}function p(){return function(n){return S(n)==D}}function h(n){return function(t){var e=n(t);return e===!0?x(t):e}}function N(n,t,e){return L(function(n,t){return t(n,e)},t,n)}function v(n,t,e,r,o){var u=n(e);if(u){var i=N(t,r,u),a=e.substr(R(u[0]));return o(a,i)}}function b(n,t){return w(v,n,t)}function y(n,t){return t}function _(n,t){var e=n?_:y;return C(n,t,e)}var m=1,T=2,O=3,S=g(G,x),C=U(b(n,P(s,a,i,f)),b(t,P(l)),b(e,P()),b(o,P(s,p)),b(u,P(h)),function(n){throw r('"'+n+'" could not be tokenised')});return function(n){try{return _(n,E)}catch(t){throw r('Could not compile "'+n+'" because '+t.message)}}}),Y="n",j="p",J="e";(function(){function t(n,t){var e=t?1:-1,r=t?2:1;return function(t){var o,u,i,a=m(),c=clarinet.parser(),s=_(c,a.notify),f=O(a,c,s);return k(t)?(o=t,u=arguments[e],i=arguments[r]):(o=t.url,u=t.body,i=t.complete),f.start(n,o,u,i),T(f,a,s)}}n.oboe={doGet:t("GET"),doDelete:t("DELETE"),doPost:t("POST",!0),doPut:t("PUT",!0)}})()})(window,Object,Array,Error);