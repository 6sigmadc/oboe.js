(function(t,e,n,r,o){function i(t){return t[s(t)-1]}function a(t){return t&&t.constructor===n}function s(t){return t.length}function u(t,e){return n.prototype.slice.call(t,e)}function c(t){return"string"==typeof t}function f(t,e){var n=u(arguments,2);t.forEach(function(t){t.apply(e,n)})}function l(t,e,n){for(var r,i=0;s(t)>i;i++)if(r=t[i].apply(o,e))return r;return n()}function d(t){var e=u(arguments);return e[0]=o,t.bind.apply(t,e)}function E(){return!0}function p(t,e,n){function r(t){var e=i(d);a(e)&&u(f,t),e[f]=t,E.push(f),d.push(t)}function u(t,e){var r=t===o?E:E.concat(t);n(e,r,d),f=t}function c(){var t=d.pop(),n=i(d);e(t,E,d),E.pop(),f=a(n)?s(n):o}var f,l,d=[],E=[],p=function(t){u(o,t),l=t,d.push(t),p=r};return t.onopenobject=function(t){p({}),t!==o&&u(t)},t.onopenarray=function(){p([]),f=0},t.onkey=u,t.onvalue=function(t){p(t),c()},t.onend=t.oncloseobject=t.onclosearray=c,function(){return l}}(function(t,e){t.forEach=t.forEach||function(t){for(var e=0;s(this)>e;e++)t(this[e])},t.filter=t.filter||function(t){var e=[];return this.forEach(function(n){t(n)&&e.push(n)}),e},e.bind=e.bind||function(t){var e=this,n=u(arguments,1);return function(){var r=n.concat(u(arguments));return e.apply(t,r)}}})(n.prototype,Function.prototype),function(i){function a(t){for(var e=Math.max(i.MAX_BUFFER_LENGTH,10),n=0,r=0,o=T.length;o>r;r++){var a=t[T[r]].length;if(a>e)switch(T[r]){case"text":closeText(t);break;default:_(t,"Max buffer length exceeded: "+T[r])}n=Math.max(n,a)}t.bufferCheckPosition=i.MAX_BUFFER_LENGTH-n+t.position}function s(t){for(var e=0,n=T.length;n>e;e++)t[T[e]]=""}function u(t){if(!(this instanceof u))return new u(t);var e=this;s(e),e.bufferCheckPosition=i.MAX_BUFFER_LENGTH,e.q=e.c=e.p="",e.opt=t||{},e.closed=e.closedRoot=e.sawRoot=!1,e.tag=e.error=null,e.state=O.BEGIN,e.stack=new b,e.position=e.column=0,e.line=1,e.slashed=!1,e.unicodeI=0,e.unicodeS=null,l(e,"onready")}function c(t){return new f(t)}function f(t){if(!(this instanceof f))return new f(t);this._parser=new u(t),this.writable=!0,this.readable=!0;var n=this;A.apply(n),this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(t){n.emit("error",t),n._parser.error=null},m.forEach(function(t){e.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){return e?(n.on(t,e),o):(n.removeAllListeners(t),n._parser["on"+t]=e,e)},enumerable:!0,configurable:!1})})}function l(t,e,n){i.INFO&&console.log("-- emit",e,n),t[e]&&t[e](n)}function d(t,e,n){E(t),l(t,e,n)}function E(t,e){t.textNode=h(t.opt,t.textNode),t.textNode&&l(t,e?e:"onvalue",t.textNode),t.textNode=""}function p(t){t.numberNode&&l(t,"onvalue",parseFloat(t.numberNode)),t.numberNode=""}function h(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function _(t,e){return E(t),e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c,e=new r(e),t.error=e,l(t,"onerror",e),t}function L(t){return t.state!==O.VALUE&&_(t,"Unexpected end"),E(t),t.c="",t.closed=!0,l(t,"onend"),u.call(t,t.opt),t}function N(t){var e=this;if(this.error)throw this.error;if(e.closed)return _(e,"Cannot write after close. Assign an onready handler.");if(null===t)return L(e);var n=0,r=t[0],o=e.p;for(i.DEBUG&&console.log("write -> ["+t+"]");r&&(o=r,e.c=r=t.charAt(n++),o!==r?e.p=o:o=e.p,r);)switch(i.DEBUG&&console.log(n,r,i.STATE[e.state]),e.position++,"\n"===r?(e.line++,e.column=0):e.column++,e.state){case O.BEGIN:"{"===r?e.state=O.OPEN_OBJECT:"["===r?e.state=O.OPEN_ARRAY:"\r"!==r&&"\n"!==r&&" "!==r&&"	"!==r&&_(e,"Non-whitespace before {[.");continue;case O.OPEN_KEY:case O.OPEN_OBJECT:if("\r"===r||"\n"===r||" "===r||"	"===r)continue;if(e.state===O.OPEN_KEY)e.stack.push(O.CLOSE_KEY);else{if("}"===r){l(e,"onopenobject"),l(e,"oncloseobject"),e.state=e.stack.pop()||O.VALUE;continue}e.stack.push(O.CLOSE_OBJECT)}'"'===r?e.state=O.STRING:_(e,'Malformed object key should start with "');continue;case O.CLOSE_KEY:case O.CLOSE_OBJECT:if("\r"===r||"\n"===r||" "===r||"	"===r)continue;e.state===O.CLOSE_KEY?"key":"object",":"===r?(e.state===O.CLOSE_OBJECT?(e.stack.push(O.CLOSE_OBJECT),E(e,"onopenobject")):E(e,"onkey"),e.state=O.VALUE):"}"===r?(d(e,"oncloseobject"),e.state=e.stack.pop()||O.VALUE):","===r?(e.state===O.CLOSE_OBJECT&&e.stack.push(O.CLOSE_OBJECT),E(e),e.state=O.OPEN_KEY):_(e,"Bad object");continue;case O.OPEN_ARRAY:case O.VALUE:if("\r"===r||"\n"===r||" "===r||"	"===r)continue;if(e.state===O.OPEN_ARRAY){if(l(e,"onopenarray"),e.state=O.VALUE,"]"===r){l(e,"onclosearray"),e.state=e.stack.pop()||O.VALUE;continue}e.stack.push(O.CLOSE_ARRAY)}'"'===r?e.state=O.STRING:"{"===r?e.state=O.OPEN_OBJECT:"["===r?e.state=O.OPEN_ARRAY:"t"===r?e.state=O.TRUE:"f"===r?e.state=O.FALSE:"n"===r?e.state=O.NULL:"-"===r?e.numberNode+=r:"0"===r?(e.numberNode+=r,e.state=O.NUMBER_DIGIT):-1!=="123456789".indexOf(r)?(e.numberNode+=r,e.state=O.NUMBER_DIGIT):_(e,"Bad value");continue;case O.CLOSE_ARRAY:if(","===r)e.stack.push(O.CLOSE_ARRAY),E(e,"onvalue"),e.state=O.VALUE;else if("]"===r)d(e,"onclosearray"),e.state=e.stack.pop()||O.VALUE;else{if("\r"===r||"\n"===r||" "===r||"	"===r)continue;_(e,"Bad array")}continue;case O.STRING:var s=n-1,u=e.slashed,c=e.unicodeI;t:for(;;){for(i.DEBUG&&console.log(n,r,i.STATE[e.state],u);c>0;)if(e.unicodeS+=r,r=t.charAt(n++),4===c?(e.textNode+=String.fromCharCode(parseInt(e.unicodeS,16)),c=0,s=n-1):c++,!r)break t;if('"'===r&&!u){e.state=e.stack.pop()||O.VALUE,e.textNode+=t.substring(s,n-1),e.textNode||l(e,"onvalue","");break}if("\\"===r&&!u&&(u=!0,e.textNode+=t.substring(s,n-1),r=t.charAt(n++),!r))break;if(u){if(u=!1,"n"===r?e.textNode+="\n":"r"===r?e.textNode+="\r":"t"===r?e.textNode+="	":"f"===r?e.textNode+="\f":"b"===r?e.textNode+="\b":"u"===r?(c=1,e.unicodeS=""):e.textNode+=r,r=t.charAt(n++),s=n-1,r)continue;break}U.lastIndex=n;var f=U.exec(t);if(null===f){n=t.length+1,e.textNode+=t.substring(s,n-1);break}if(n=f.index+1,r=t.charAt(f.index),!r){e.textNode+=t.substring(s,n-1);break}}e.slashed=u,e.unicodeI=c;continue;case O.TRUE:if(""===r)continue;"r"===r?e.state=O.TRUE2:_(e,"Invalid true started with t"+r);continue;case O.TRUE2:if(""===r)continue;"u"===r?e.state=O.TRUE3:_(e,"Invalid true started with tr"+r);continue;case O.TRUE3:if(""===r)continue;"e"===r?(l(e,"onvalue",!0),e.state=e.stack.pop()||O.VALUE):_(e,"Invalid true started with tru"+r);continue;case O.FALSE:if(""===r)continue;"a"===r?e.state=O.FALSE2:_(e,"Invalid false started with f"+r);continue;case O.FALSE2:if(""===r)continue;"l"===r?e.state=O.FALSE3:_(e,"Invalid false started with fa"+r);continue;case O.FALSE3:if(""===r)continue;"s"===r?e.state=O.FALSE4:_(e,"Invalid false started with fal"+r);continue;case O.FALSE4:if(""===r)continue;"e"===r?(l(e,"onvalue",!1),e.state=e.stack.pop()||O.VALUE):_(e,"Invalid false started with fals"+r);continue;case O.NULL:if(""===r)continue;"u"===r?e.state=O.NULL2:_(e,"Invalid null started with n"+r);continue;case O.NULL2:if(""===r)continue;"l"===r?e.state=O.NULL3:_(e,"Invalid null started with nu"+r);continue;case O.NULL3:if(""===r)continue;"l"===r?(l(e,"onvalue",null),e.state=e.stack.pop()||O.VALUE):_(e,"Invalid null started with nul"+r);continue;case O.NUMBER_DECIMAL_POINT:"."===r?(e.numberNode+=r,e.state=O.NUMBER_DIGIT):_(e,"Leading zero not followed by .");continue;case O.NUMBER_DIGIT:-1!=="0123456789".indexOf(r)?e.numberNode+=r:"."===r?(-1!==e.numberNode.indexOf(".")&&_(e,"Invalid number has two dots"),e.numberNode+=r):"e"===r||"E"===r?((-1!==e.numberNode.indexOf("e")||-1!==e.numberNode.indexOf("E"))&&_(e,"Invalid number has two exponential"),e.numberNode+=r):"+"===r||"-"===r?("e"!==o&&"E"!==o&&_(e,"Invalid symbol in number"),e.numberNode+=r):(p(e),n--,e.state=e.stack.pop()||O.VALUE);continue;default:_(e,"Unknown state: "+e.state)}return e.position>=e.bufferCheckPosition&&a(e),e}var v,b;if(v="object"==typeof process&&process.env?process.env:t,"function"==typeof FastList)b=FastList;else if("function"==typeof require)try{b=require("fast-list")}catch(y){b=n}else b=n;i.parser=function(t){return new u(t)},i.CParser=u,i.CStream=f,i.createStream=c,i.MAX_BUFFER_LENGTH=65536,i.DEBUG="debug"===v.CDEBUG,i.INFO="debug"===v.CDEBUG||"info"===v.CDEBUG,i.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var A,T=["textNode","numberNode"],m=i.EVENTS.filter(function(t){return"error"!==t&&"end"!==t}),O=0;i.STATE={BEGIN:O++,VALUE:O++,OPEN_OBJECT:O++,CLOSE_OBJECT:O++,OPEN_ARRAY:O++,CLOSE_ARRAY:O++,TEXT_ESCAPE:O++,STRING:O++,BACKSLASH:O++,END:O++,OPEN_KEY:O++,CLOSE_KEY:O++,TRUE:O++,TRUE2:O++,TRUE3:O++,FALSE:O++,FALSE2:O++,FALSE3:O++,FALSE4:O++,NULL:O++,NULL2:O++,NULL3:O++,NUMBER_DECIMAL_POINT:O++,NUMBER_DIGIT:O++};for(var S in i.STATE)i.STATE[i.STATE[S]]=S;O=i.STATE,e.create||(e.create=function(t){function e(){this.__proto__=t}return e.prototype=t,new e}),e.getPrototypeOf||(e.getPrototypeOf=function(t){return t.__proto__}),e.keys||(e.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e});var U=/[\\"\n]/g;u.prototype={end:function(){L(this)},write:N,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{A=require("stream").Stream}catch(w){A=function(){}}f.prototype=e.create(A.prototype,{constructor:{value:f}}),f.prototype.write=function(t){return this._parser.write(""+t),this.emit("data",t),!0},f.prototype.end=function(t){return t&&t.length&&this._parser.write(""+t),this._parser.end(),!0},f.prototype.on=function(t,e){var r=this;return r._parser["on"+t]||-1===m.indexOf(t)||(r._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:n.apply(null,arguments);e.splice(0,0,t),r.emit.apply(r,e)}),A.prototype.on.call(r,t,e)},f.prototype.destroy=function(){s(this._parser),this.emit("close")}}("undefined"==typeof exports?clarinet={}:exports);var h=function(t){function e(t,e,n){t.onprogress=e,t.onload=n}function n(t,e,n){t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(e(),n())}}var r="onprogress"in new t,o=r?e:n;return function(e,n,r,i,a){function u(){var t=c.responseText;i(t.substr(f)),f=s(t)}var c=new t,f=0;c.open(e,n,!0),c.send(r),o(c,u,a)}}(XMLHttpRequest),_=function(){function t(t,e,n,r,o,i){var a=t(r,o,i-1);return a&&c(e,a,o,i)}function e(e,n,r,o,i,a){return o[a]==r&&t(e,n,r,o,i,a)}function n(t,e,r,i,a,s){return-1>s?!1:-1==s||t(i,a,s)||n(t,o,o,i,a,s-1)}function a(t,e,n,r,o,i){return-1==i&&c(e,!0,o,i)}function u(t,e,n,r,o){var a=t(r,o,s(r)-1);return a===!0?i(o):a}function c(t,e,n,r){return t?n[r+1]:e||!0}function f(t,e,n,r,o){var i=t.exec(n);if(i){var a=e(r,i),u=n.substr(s(i[0]));return o(u,a)}}function p(t,e,n){var r=!!n[1],o=n[2];return d(t,e,r,o)}function h(t){return t}function _(t,e){var n=e?d(p,e):h;return d(f,t,n)}function L(t,e){return e}function N(t,e){function n(){throw r('"'+t+'" could not be tokenised')}var o=t?N:L;return l(w,[t,e,o],n)}var v=/^(\$?)(\w+)/,b=/^(\$?)\["(\w+)"\]/,y=/^(\$?)\[(\d+)\]/,A=/^(\$?)\*/,T=/^(\$?)\[\*\]/,m=/^\.\./,O=/^\./,S=/^(\$?)!/,U=/^$/,w=[_(v,e),_(b,e),_(y,e),_(A,t),_(T,t),_(m,n),_(O),_(S,a),_(U,u)];return function(t){try{return N(t,E)}catch(e){throw r('Could not compile "'+t+'" because '+e.message)}}}();(function(){function e(){var t=this,e=clarinet.parser(),n=[],r=[];t._nodeListeners=n,t._pathListeners=r,t._errorListeners=[],t._clarinet=e,t._root=p(e,t._notify.bind(t,n),t._notify.bind(t,r)),e.onerror=function(e){t._notifyErr(e),t.close()}}function n(e,n,o){o=o||t;var i=_(e);return function(t,e,a,s){var u=i(e,s);if(u!==!1)try{n.call(o,u,e,a)}catch(c){this._notifyErr(r("Error thrown by callback "+c.message))}}}function i(t,e,r,o){t.push(n(e,r,o))}function a(t,e){for(var n in e)i(t,n,e[n])}function s(t,e,n,r){c(e)?i(t,e,n,r):a(t,e)}function u(t,n){var r=n?1:-1,o=n?2:1;return function(n){var i,a,s;return c(n)?(i=n,a=arguments[r],s=arguments[o]):(i=n.url,a=n.body,s=n.complete),(new e)._fetch(t,i,a,s)}}t.oboe={doGet:u("GET"),doDelete:u("DELETE"),doPost:u("POST",!0),doPut:u("PUT",!0)};var l=e.prototype;l._fetch=function(t,e,n,r){var o=this;return n=n?c(n)?n:JSON.stringify(n):null,h(t,e,n,o.read.bind(o),function(){o.close(),r&&r(o._root())}),o},l.read=function(t){if(this.closed)throw r("closed");try{this._clarinet.write(t)}catch(e){}},l.close=function(){var t=this._clarinet.close();this.closed=!0,this._nodeListeners=[],this._pathListeners=[],this._errorListeners=[],t.onkey=t.onvalue=t.onopenobject=t.onopenarray=t.onend=t.oncloseobject=t.onclosearray=t.onerror=o},l._notify=function(t,e,n,r){var o=r.concat([e]);f(t,this,e,n,r,o)},l._notifyErr=function(t){f(this._errorListeners,o,t)},l.onPath=function(t,e,n){return s(this._pathListeners,t,e,n),this},l.onFind=function(t,e,n){return s(this._nodeListeners,t,e,n),this},l.onError=function(t){return this._errorListeners.push(t),this}})()})(window,Object,Array,Error);